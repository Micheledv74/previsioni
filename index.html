const html = `<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Meteo Procida</title>
  <style>
    body { 
      font-family: sans-serif; 
      background: linear-gradient(135deg, #012549, #003d6b); 
      color: white; 
      padding: 20px; 
      text-align: center;
    }
    #app { margin-top: 50px; }
  </style>
</head>
<body>
  <h1>Meteo Procida ⛅</h1>
  <div id="app">Caricamento...</div>
  
  <script>
    fetch('weather-data.json')
      .then(r => r.json())
      .then(data => {
        console.log('Data loaded:', data);
        if (data && data.days) {
          const today = data.days[0];
          const temp = Math.round(today.temp.max);
          const icon = today.rain && today.rain.total_mm > 5 ? '🌧️' : '☀️';
          const summary = today.summary || 'Previsioni meteo';
          document.getElementById('app').innerHTML = 
            '<div style="font-size:80px">' + icon + '</div>' +
            '<div style="font-size:60px; margin:20px 0">' + temp + '°</div>' +
            '<p>' + summary + '</p>';
        } else {
          document.getElementById('app').innerHTML = 'Errore dati';
        }
      })
      .catch(e => {
        console.error(e);
        document.getElementById('app').innerHTML = 'Errore caricamento';
      });
  </script>
</body>
</html>`;

return [{ json: { content: html }}];
