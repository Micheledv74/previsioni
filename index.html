<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Previsioni Meteo Procida - Sintesi AI</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #eef; color: #222; }
    .day { background: #fff; border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    h2 { color: #0056b3; }
    ul { padding-left: 16px; }
    li { margin-bottom: 6px; }
  </style>
</head>
<body>
  <h1>Previsioni Meteo Procida - Sintesi AI</h1>
  <div id="previsioni"></div>

  <script>
  // Questa è la linea corretta
  const aiJson = {"days":[{"date":"2023-10-26","rainPeriods":[{"start":"17:30","end":"20:00"},{"start":"22:00","end":"23:59"}],"windPeriods":[{"start":"00:00","end":"09:00","intensity":"leggero","direction":"E"},{"start":"09:00","end":"16:00","intensity":"moderato","direction":"SE"},{"start":"16:00","end":"23:59","intensity":"forte","direction":"SE"}],"pressureTrend":"lievemente in calo","seaCondition":"poco mosso","summary":"Mattinata serena con velature in graduale aumento. Il pomeriggio vedrà un deciso peggioramento, con l'arrivo di piogge sparse e un sensibile rinforzo del vento di Scirocco. La sera sarà caratterizzata da precipitazioni più insistenti e raffiche di vento, alcune misurazioni indicavano raffiche isolate fino a 28 nodi già in serata.","advice":["Si consiglia di assicurare oggetti esposti al vento, in particolare balconi e giardini.","Monitorare l'evolversi del moto ondoso per chi ha attività in mare, l'aumento sarà repentino nel tardo pomeriggio."]},{"date":"2023-10-27","rainPeriods":[{"start":"00:00","end":"08:30"},{"start":"10:00","end":"16:30"}],"windPeriods":[{"start":"00:00","end":"12:00","intensity":"forte","direction":"SE"},{"start":"12:00","end":"20:00","intensity":"molto forte","direction":"S"},{"start":"20:00","end":"23:59","intensity":"moderato","direction":"SO"}],"pressureTrend":"in calo, poi stabile","seaCondition":"agitato","summary":"Sarà la giornata più critica della settimana, con tempo fortemente perturbato. Attese piogge abbondanti e continue per gran parte della giornata, accompagnate da vento di Scirocco/Ostro molto forte, con raffiche intense che potrebbero superare i 45 nodi, superando le stime di alcuni modelli iniziali. Il mare sarà agitato, rendendo ogni attività nautica estremamente rischiosa e generando importanti mareggiate.","advice":["Evitare assolutamente la navigazione e le uscite in mare, anche nelle zone più riparate.","Limitare gli spostamenti via terra, prestare massima attenzione a possibili disagi dovuti al vento e alla pioggia intensa, come caduta di alberi o detriti."]},{"date":"2023-10-28","rainPeriods":[{"start":"00:00","end":"04:00"}],"windPeriods":[{"start":"00:00","end":"10:00","intensity":"forte","direction":"SO"},{"start":"10:00","end":"18:00","intensity":"moderato","direction":"O"},{"start":"18:00","end":"23:59","intensity":"leggero","direction":"NO"}],"pressureTrend":"in aumento","seaCondition":"molto mosso","summary":"Il fronte perturbato si allontana, portando a un netto miglioramento delle condizioni meteo. Resteranno residue piogge nelle primissime ore del giorno, con fenomeni in rapido esaurimento prima dell'alba. Il vento, inizialmente forte da Sud-Ovest, diminuirà gradualmente nel corso della giornata. Il mare, ancora molto mosso al mattino a causa della mareggiata pregressa, si calmerà progressivamente pur mantenendo un moto ondoso significativo.","advice":["Permane il rischio di risacche lungo le coste e di onda lunga, si raccomanda cautela nei pressi del mare.","Verificare la stabilità delle imbarcazioni e delle strutture portuali dopo la mareggiata."]},{"date":"2023-10-29","rainPeriods":[],"windPeriods":[{"start":"00:00","end":"10:00","intensity":"leggero","direction":"NO"},{"start":"10:00","end":"23:59","intensity":"leggero","direction":"O"}],"pressureTrend":"stabile","seaCondition":"calmo","summary":"Giornata di pieno sole con cielo sereno o al più poco nuvoloso. Il vento sarà debole, orientato dai quadranti occidentali con brezze termiche pomeridiane che non supereranno i 10 nodi, a differenza di alcune previsioni che indicavano un leggero rinforzo. Condizioni marine ottime, con mare calmo o quasi calmo. Ideale per ogni attività all'aperto e nautica.","advice":["Approfittare della splendida giornata per attività all'aria aperta e per la navigazione costiera.","Non dimenticare la protezione solare, anche se la temperatura sarà mite, il sole di ottobre è ancora forte."]},{"date":"2023-10-30","rainPeriods":[],"windPeriods":[{"start":"00:00","end":"09:00","intensity":"leggero","direction":"variabile"},{"start":"09:00","end":"19:00","intensity":"moderato","direction":"SO"},{"start":"19:00","end":"23:59","intensity":"moderato","direction":"S"}],"pressureTrend":"stabile","seaCondition":"calmo","summary":"Persistono condizioni di bel tempo con cielo sereno e visibilità eccellente. Il vento sarà leggero al mattino, per poi rinforzare moderatamente da Sud-Ovest/Sud nel pomeriggio e in serata, con raffiche occasionali fino a 20 nodi. Il mare si manterrà calmo o poco mosso. Un quadro generale di stabilità con un lieve sentore di cambiamento per i giorni successivi, anticipato da una variazione delle correnti in quota.","advice":["Ideale per escursioni e bagni, con temperature gradevoli.","Si raccomanda di consultare l'aggiornamento per il fine settimana a causa di un potenziale peggioramento delle condizioni meteo."]},{"date":"2023-10-31","rainPeriods":[{"start":"14:00","end":"16:30"}],"windPeriods":[{"start":"00:00","end":"23:59","intensity":"moderato","direction":"S"}],"pressureTrend":"lievemente in calo","seaCondition":"poco mosso","summary":"La giornata sarà caratterizzata da maggiore variabilità. Al mattino cielo parzialmente nuvoloso, nel pomeriggio possibilità di piovaschi isolati e di breve durata, ma con intensità localmente elevata. Il vento sarà moderato da Sud, con qualche raffica più decisa (fino a 25 nodi) in concomitanza dei rovesci. Il mare tenderà a diventare mosso nel corso della giornata, con onde in aumento.","advice":["Portare con sé un ombrello o un k-way per i brevi rovesci pomeridiani, potrebbero essere intensi.","Considerare l'aumento del moto ondoso per le attività nautiche; la navigazione potrebbe risultare fastidiosa."]},{"date":"2023-11-01","rainPeriods":[],"windPeriods":[{"start":"00:00","end":"12:00","intensity":"moderato","direction":"O"},{"start":"12:00","end":"23:59","intensity":"leggero","direction":"NO"}],"pressureTrend":"in aumento","seaCondition":"mosso","summary":"Netto miglioramento delle condizioni meteo, con il ritorno del sole e cielo sereno o poco nuvoloso. Il vento di Maestrale, inizialmente moderato al mattino (fino a 20 nodi), si attenuerà progressivamente fino a diventare leggero in serata. Il mare, mosso al mattino per effetto della ventilazione residua, si calmerà rapidamente fino a divenire poco mosso verso sera, contrariamente ad alcuni modelli che suggerivano un moto ondoso più persistente.","advice":["Ottima giornata per godere delle bellezze dell'isola in tutta tranquillità.","Le condizioni marine miglioreranno rapidamente, ma si consiglia cautela per le prime ore del mattino."]}]};
  // Il resto del codice di visualizzazione subito qui sotto
</script>
    function formatPeriod(period) {
      return period.start + " - " + period.end;
    }

    function renderDay(day) {
      let html = `<h2>${day.date}</h2>`;

      if(day.rainPeriods && day.rainPeriods.length) {
        html += "<h3>Precipitazioni previste</h3><ul>";
        day.rainPeriods.forEach(period => {
          html += `<li>${formatPeriod(period)}</li>`;
        });
        html += "</ul>";
      }

      if(day.windPeriods && day.windPeriods.length) {
        html += "<h3>Venti previsti</h3><ul>";
        day.windPeriods.forEach(period => {
          html += `<li>${formatPeriod(period)} - Intensità: ${period.intensity}, Direzione: ${period.direction}</li>`;
        });
        html += "</ul>";
      }

      if(day.pressureTrend) {
        html += `<h3>Trend pressione</h3><p>${day.pressureTrend}</p>`;
      }

      if(day.seaCondition) {
        html += `<h3>Condizioni mare</h3><p>${day.seaCondition}</p>`;
      }

      if(day.summary) {
        html += `<h3>Sintesi</h3><p>${day.summary}</p>`;
      }

      if(day.advice && day.advice.length) {
        html += "<h3>Consigli</h3><ul>";
        day.advice.forEach(tip => {
          html += `<li>${tip}</li>`;
        });
        html += "</ul>";
      }
      return html;
    }

    function renderForecast() {
      if(!aiJson.days || !aiJson.days.length) {
        document.getElementById("previsioni").innerHTML = "<p>Nessuna previsione disponibile.</p>";
        return;
      }
      const container = document.getElementById("previsioni");
      let fullHtml = "";
      aiJson.days.forEach(day => {
        fullHtml += `<div class="day">${renderDay(day)}</div>`;
      });
      container.innerHTML = fullHtml;
    }

    renderForecast();
  </script>
</body>
</html>
