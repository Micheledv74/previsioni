<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Previsioni Procida - Meteo Giornaliero</title>
  <style>
    /* copy your existing CSS here unchanged */
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="header">PREVISIONI METEO - PROCIDA</div>
  <div id="maininfo" class="today-main"></div>
  <div id="tabbar" class="tabs"></div>
  <div class="chart-container" id="chartcontainer"></div>
  <div class="chart-container" id="windchartcontainer"></div>
  <div class="chart-container" id="rainchartcontainer"></div>
  <div class="chart-container" id="marinechartcontainer">
    <section class="card card-anim" role="region" aria-label="Grafico onde marine">
      <div class="chart-title">Condizioni Marine</div>
      <div class="canvas-wrap"><canvas id="marine-wave-chart"></canvas></div>
      <div id="marine-summary"></div>
      <div id="marine-alerts"></div>
    </section>
  </div>
  <div class="footer" id="footer">Powered by Open-Meteo â€¢ UI by micheledv74 â€¢ Ultimo agg.: <span id="updated_stamp"></span></div>
  <script>
    const DATA = {"mergedHourly":[{"time":"2025-10-13T00:00","wave_height":0.06,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T01:00","wave_height":0.06,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T02:00","wave_height":0.06,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T03:00","wave_height":0.06,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T04:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T05:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T06:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T07:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T08:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T09:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T10:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T11:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T12:00","wave_height":0.04,"swell_height":0.04,"swell_direction":209},{"time":"2025-10-13T13:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T14:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T15:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T16:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T17:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T18:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T19:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T20:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T21:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T22:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-13T23:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-14T00:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-14T01:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-14T02:00","wave_height":0.04,"swell_height":0.02,"swell_direction":209},{"time":"2025-10-14T03:00","wave_height":0.04,"swell_height":0.02,"swell_direction":241},{"time":"2025-10-14T04:00","wave_height":0.04,"swell_height":0.02,"swell_direction":274},{"time":"2025-10-14T05:00","wave_height":0.04,"swell_height":0.02,"swell_direction":306},{"time":"2025-10-14T06:00","wave_height":0.04,"swell_height":0.02,"swell_direction":306},{"time":"2025-10-14T07:00","wave_height":0.04,"swell_height":0.04,"swell_direction":307},{"time":"2025-10-14T08:00","wave_height":0.04,"swell_height":0.04,"swell_direction":307},{"time":"2025-10-14T09:00","wave_height":0.04,"swell_height":0.04,"swell_direction":307},{"time":"2025-10-14T10:00","wave_height":0.04,"swell_height":0.04,"swell_direction":307},{"time":"2025-10-14T11:00","wave_height":0.04,"swell_height":0.04,"swell_direction":307},{"time":"2025-10-14T12:00","wave_height":0.04,"swell_height":0.04,"swell_direction":306},{"time":"2025-10-14T13:00","wave_height":0.04,"swell_height":0.04,"swell_direction":305},{"time":"2025-10-14T14:00","wave_height":0.04,"swell_height":0.04,"swell_direction":304},{"time":"2025-10-14T15:00","wave_height":0.04,"swell_height":0.04,"swell_direction":302},{"time":"2025-10-14T16:00","wave_height":0.04,"swell_height":0.02,"swell_direction":299},{"time":"2025-10-14T17:00","wave_height":0.04,"swell_height":0.02,"swell_direction":297},{"time":"2025-10-14T18:00","wave_height":0.04,"swell_height":0.02,"swell_direction":270},{"time":"2025-10-14T19:00","wave_height":0.04,"swell_height":0.02,"swell_direction":243},{"time":"2025-10-14T20:00","wave_height":0.04,"swell_height":0.02,"swell_direction":216},{"time":"2025-10-14T21:00","wave_height":0.04,"swell_height":0.02,"swell_direction":216},{"time":"2025-10-14T22:00","wave_height":0.04,"swell_height":0.02,"swell_direction":216},{"time":"2025-10-14T23:00","wave_height":0.04,"swell_height":0.02,"swell_direction":216},{"time":"2025-10-15T00:00","wave_height":0.04,"swell_height":0.02,"swell_direction":216},{"time":"2025-10-15T01:00","wave_height":0.04,"swell_height":0.04,"swell_direction":217},{"time":"2025-10-15T02:00","wave_height":0.04,"swell_height":0.04,"swell_direction":217},{"time":"2025-10-15T03:00","wave_height":0.04,"swell_height":0.04,"swell_direction":217},{"time":"2025-10-15T04:00","wave_height":0.04,"swell_height":0.04,"swell_direction":217},{"time":"2025-10-15T05:00","wave_height":0.04,"swell_height":0.04,"swell_direction":217},{"time":"2025-10-15T06:00","wave_height":0.04,"swell_height":0.04,"swell_direction":217},{"time":"2025-10-15T07:00","wave_height":0.04,"swell_height":0.04,"swell_direction":218},{"time":"2025-10-15T08:00","wave_height":0.04,"swell_height":0.04,"swell_direction":218},{"time":"2025-10-15T09:00","wave_height":0.06,"swell_height":0.06,"swell_direction":218},{"time":"2025-10-15T10:00","wave_height":0.06,"swell_height":0.06,"swell_direction":219},{"time":"2025-10-15T11:00","wave_height":0.08,"swell_height":0.08,"swell_direction":219},{"time":"2025-10-15T12:00","wave_height":0.1,"swell_height":0.1,"swell_direction":219},{"time":"2025-10-15T13:00","wave_height":0.1,"swell_height":0.1,"swell_direction":219},{"time":"2025-10-15T14:00","wave_height":0.12,"swell_height":0.12,"swell_direction":219},{"time":"2025-10-15T15:00","wave_height":0.12,"swell_height":0.12,"swell_direction":219},{"time":"2025-10-15T16:00","wave_height":0.14,"swell_height":0.14,"swell_direction":219},{"time":"2025-10-15T17:00","wave_height":0.14,"swell_height":0.14,"swell_direction":219},{"time":"2025-10-15T18:00","wave_height":0.2,"swell_height":0.16,"swell_direction":219},{"time":"2025-10-15T19:00","wave_height":0.26,"swell_height":0.16,"swell_direction":219},{"time":"2025-10-15T20:00","wave_height":0.32,"swell_height":0.18,"swell_direction":219},{"time":"2025-10-15T21:00","wave_height":0.34,"swell_height":0.18,"swell_direction":219},{"time":"2025-10-15T22:00","wave_height":0.34,"swell_height":0.2,"swell_direction":219},{"time":"2025-10-15T23:00","wave_height":0.36,"swell_height":0.2,"swell_direction":219},{"time":"2025-10-16T00:00","wave_height":0.38,"swell_height":0.2,"swell_direction":219},{"time":"2025-10-16T01:00","wave_height":0.38,"swell_height":0.22,"swell_direction":218},{"time":"2025-10-16T02:00","wave_height":0.4,"swell_height":0.22,"swell_direction":218},{"time":"2025-10-16T03:00","wave_height":0.42,"swell_height":0.22,"swell_direction":218},{"time":"2025-10-16T04:00","wave_height":0.42,"swell_height":0.22,"swell_direction":217},{"time":"2025-10-16T05:00","wave_height":0.44,"swell_height":0.22,"swell_direction":217},{"time":"2025-10-16T06:00","wave_height":0.48,"swell_height":0.26,"swell_direction":198},{"time":"2025-10-16T07:00","wave_height":0.5,"swell_height":0.28,"swell_direction":178},{"time":"2025-10-16T08:00","wave_height":0.54,"swell_height":0.32,"swell_direction":159},{"time":"2025-10-16T09:00","wave_height":0.58,"swell_height":0.38,"swell_direction":158},{"time":"2025-10-16T10:00","wave_height":0.64,"swell_height":0.42,"swell_direction":157},{"time":"2025-10-16T11:00","wave_height":0.68,"swell_height":0.48,"swell_direction":156},{"time":"2025-10-16T12:00","wave_height":0.72,"swell_height":0.54,"swell_direction":156},{"time":"2025-10-16T13:00","wave_height":0.74,"swell_height":0.58,"swell_direction":155},{"time":"2025-10-16T14:00","wave_height":0.78,"swell_height":0.64,"swell_direction":155},{"time":"2025-10-16T15:00","wave_height":0.82,"swell_height":0.64,"swell_direction":154},{"time":"2025-10-16T16:00","wave_height":0.84,"swell_height":0.66,"swell_direction":153},{"time":"2025-10-16T17:00","wave_height":0.88,"swell_height":0.66,"swell_direction":152},{"time":"2025-10-16T18:00","wave_height":0.92,"swell_height":0.68,"swell_direction":152},{"time":"2025-10-16T19:00","wave_height":0.94,"swell_height":0.7,"swell_direction":153},{"time":"2025-10-16T20:00","wave_height":0.98,"swell_height":0.72,"swell_direction":153},{"time":"2025-10-16T21:00","wave_height":1,"swell_height":0.74,"swell_direction":153},{"time":"2025-10-16T22:00","wave_height":1,"swell_height":0.74,"swell_direction":153},{"time":"2025-10-16T23:00","wave_height":1.02,"swell_height":0.76,"swell_direction":153},{"time":"2025-10-17T00:00","wave_height":1.04,"swell_height":0.74,"swell_direction":153},{"time":"2025-10-17T01:00","wave_height":1.06,"swell_height":0.72,"swell_direction":154},{"time":"2025-10-17T02:00","wave_height":1.08,"swell_height":0.7,"swell_direction":154},{"time":"2025-10-17T03:00","wave_height":1.1,"swell_height":0.7,"swell_direction":154},{"time":"2025-10-17T04:00","wave_height":1.12,"swell_height":0.72,"swell_direction":155},{"time":"2025-10-17T05:00","wave_height":1.14,"swell_height":0.72,"swell_direction":155},{"time":"2025-10-17T06:00","wave_height":1.14,"swell_height":0.72,"swell_direction":155},{"time":"2025-10-17T07:00","wave_height":1.16,"swell_height":0.74,"swell_direction":155},{"time":"2025-10-17T08:00","wave_height":1.16,"swell_height":0.74,"swell_direction":155},{"time":"2025-10-17T09:00","wave_height":1.2,"swell_height":0.76,"swell_direction":176},{"time":"2025-10-17T10:00","wave_height":1.22,"swell_height":0.76,"swell_direction":198},{"time":"2025-10-17T11:00","wave_height":1.26,"swell_height":0.78,"swell_direction":219},{"time":"2025-10-17T12:00","wave_height":1.28,"swell_height":0.8,"swell_direction":218},{"time":"2025-10-17T13:00","wave_height":1.32,"swell_height":0.82,"swell_direction":216},{"time":"2025-10-17T14:00","wave_height":1.34,"swell_height":0.84,"swell_direction":215},{"time":"2025-10-17T15:00","wave_height":1.32,"swell_height":0.84,"swell_direction":211},{"time":"2025-10-17T16:00","wave_height":1.32,"swell_height":0.82,"swell_direction":208},{"time":"2025-10-17T17:00","wave_height":1.3,"swell_height":0.82,"swell_direction":204},{"time":"2025-10-17T18:00","wave_height":1.24,"swell_height":0.84,"swell_direction":206},{"time":"2025-10-17T19:00","wave_height":1.18,"swell_height":0.86,"swell_direction":207},{"time":"2025-10-17T20:00","wave_height":1.12,"swell_height":0.88,"swell_direction":209},{"time":"2025-10-17T21:00","wave_height":1.06,"swell_height":0.82,"swell_direction":209},{"time":"2025-10-17T22:00","wave_height":1,"swell_height":0.76,"swell_direction":208},{"time":"2025-10-17T23:00","wave_height":0.94,"swell_height":0.7,"swell_direction":208},{"time":"2025-10-18T00:00","wave_height":0.9,"swell_height":0.64,"swell_direction":209},{"time":"2025-10-18T01:00","wave_height":0.84,"swell_height":0.56,"swell_direction":209},{"time":"2025-10-18T02:00","wave_height":0.8,"swell_height":0.5,"swell_direction":210},{"time":"2025-10-18T03:00","wave_height":0.82,"swell_height":0.58,"swell_direction":225},{"time":"2025-10-18T04:00","wave_height":0.86,"swell_height":0.64,"swell_direction":240},{"time":"2025-10-18T05:00","wave_height":0.88,"swell_height":0.72,"swell_direction":255},{"time":"2025-10-18T06:00","wave_height":0.9,"swell_height":0.76,"swell_direction":259},{"time":"2025-10-18T07:00","wave_height":0.9,"swell_height":0.8,"swell_direction":264},{"time":"2025-10-18T08:00","wave_height":0.92,"swell_height":0.84,"swell_direction":268},{"time":"2025-10-18T09:00","wave_height":0.9,"swell_height":0.84,"swell_direction":268},{"time":"2025-10-18T10:00","wave_height":0.88,"swell_height":0.84,"swell_direction":268},{"time":"2025-10-18T11:00","wave_height":0.86,"swell_height":0.84,"swell_direction":268},{"time":"2025-10-18T12:00","wave_height":0.84,"swell_height":0.8,"swell_direction":268},{"time":"2025-10-18T13:00","wave_height":0.8,"swell_height":0.76,"swell_direction":268},{"time":"2025-10-18T14:00","wave_height":0.78,"swell_height":0.72,"swell_direction":268},{"time":"2025-10-18T15:00","wave_height":0.78,"swell_height":0.72,"swell_direction":267},{"time":"2025-10-18T16:00","wave_height":0.76,"swell_height":0.72,"swell_direction":265},{"time":"2025-10-18T17:00","wave_height":0.76,"swell_height":0.72,"swell_direction":264},{"time":"2025-10-18T18:00","wave_height":0.74,"swell_height":0.7,"swell_direction":264},{"time":"2025-10-18T19:00","wave_height":0.74,"swell_height":0.66,"swell_direction":264},{"time":"2025-10-18T20:00","wave_height":0.72,"swell_height":0.64,"swell_direction":264},{"time":"2025-10-18T21:00","wave_height":0.7,"swell_height":0.64,"swell_direction":264},{"time":"2025-10-18T22:00","wave_height":0.66,"swell_height":0.62,"swell_direction":265},{"time":"2025-10-18T23:00","wave_height":0.64,"swell_height":0.62,"swell_direction":265},{"time":"2025-10-19T00:00","wave_height":0.6,"swell_height":0.56,"swell_direction":269},{"time":"2025-10-19T01:00","wave_height":0.56,"swell_height":0.52,"swell_direction":272},{"time":"2025-10-19T02:00","wave_height":0.52,"swell_height":0.46,"swell_direction":276},{"time":"2025-10-19T03:00","wave_height":0.48,"swell_height":0.44,"swell_direction":277},{"time":"2025-10-19T04:00","wave_height":0.46,"swell_height":0.4,"swell_direction":279},{"time":"2025-10-19T05:00","wave_height":0.42,"swell_height":0.38,"swell_direction":280},{"time":"2025-10-19T06:00","wave_height":0.4,"swell_height":0.34,"swell_direction":280},{"time":"2025-10-19T07:00","wave_height":0.36,"swell_height":0.32,"swell_direction":280},{"time":"2025-10-19T08:00","wave_height":0.34,"swell_height":0.28,"swell_direction":280},{"time":"2025-10-19T09:00","wave_height":0.32,"swell_height":0.26,"swell_direction":282},{"time":"2025-10-19T10:00","wave_height":0.28,"swell_height":0.24,"swell_direction":284},{"time":"2025-10-19T11:00","wave_height":0.26,"swell_height":0.22,"swell_direction":286},{"time":"2025-10-19T12:00","wave_height":0.24,"swell_height":0.2,"swell_direction":286},{"time":"2025-10-19T13:00","wave_height":0.24,"swell_height":0.18,"swell_direction":286},{"time":"2025-10-19T14:00","wave_height":0.22,"swell_height":0.16,"swell_direction":286},{"time":"2025-10-19T15:00","wave_height":0.2,"swell_height":0.14,"swell_direction":286},{"time":"2025-10-19T16:00","wave_height":0.18,"swell_height":0.14,"swell_direction":287},{"time":"2025-10-19T17:00","wave_height":0.16,"swell_height":0.12,"swell_direction":287},{"time":"2025-10-19T18:00","wave_height":0.16,"swell_height":0.12,"swell_direction":287},{"time":"2025-10-19T19:00","wave_height":0.14,"swell_height":0.1,"swell_direction":287},{"time":"2025-10-19T20:00","wave_height":0.14,"swell_height":0.1,"swell_direction":287},{"time":"2025-10-19T21:00","wave_height":0.14,"swell_height":0.1,"swell_direction":287},{"time":"2025-10-19T22:00","wave_height":0.12,"swell_height":0.08,"swell_direction":287},{"time":"2025-10-19T23:00","wave_height":0.12,"swell_height":0.08,"swell_direction":287}],"alerts":[{"type":"mare_mosso","message":"Mare mosso, attenzione nelle partenze."}],"advice":"Consiglio: mare mosso, utilizza precauzioni.","tides":{},"days":[{"day_label":"13/10","temp_max":"20.8","temp_min":"19.1","precipitation":"0.00","icon":"ðŸŒ¤ï¸","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19.8,19.7,19.7,19.6,19.5,19.4,19.3,19.3,19.1,19.2,19.4,19.7,20,20.2,20.4,20.8,20.8,20.8,20.7,20.6,20.5,20.5,20.5,20.4],"hourly_winds":[2.6,2.1,1.8,2.1,1.9,1.3,1.6,2.3,3.4,3.2,2.6,1.8,0.4,1.5,3.3,6,7.5,8.1,7.6,6.9,5.3,5.2,3.1,1.4],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"14/10","temp_max":"20.3","temp_min":"19.1","precipitation":"0.50","icon":"â›…","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[20.2,19.9,19.8,19.6,19.5,19.4,19.3,19.2,19.1,19.2,19.4,19.7,20,20.2,20.3,20.2,20.1,20.1,20,20.2,20.2,20.1,20,19.6],"hourly_winds":[2.2,3.6,4.4,4,3.6,4,4.7,4.9,4.9,5.4,5.6,5.5,5.6,6.1,7.3,8.7,9.1,7.9,5.6,4.6,1.9,2.3,2.6,3.2],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.4,0,0,0,0,0.1]},{"day_label":"15/10","temp_max":"19.3","temp_min":"18.4","precipitation":"4.30","icon":"ðŸŒ§ï¸","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19,18.8,18.9,18.9,18.6,18.4,18.4,18.6,18.8,18.7,18.7,18.9,19.2,19.3,19.2,19.2,19.3,19.2,19.2,19.1,18.9,18.8,18.8,18.9],"hourly_winds":[3.1,5,6.1,9.9,11.7,13,11.3,12,12.3,11.4,11.5,12.2,11.9,12.2,12.6,12.7,10.9,9.1,8.7,9,10.2,12.7,11.8,12.1],"hourly_precips":[0.5,0.5,0,0.1,0.6,0.5,0.1,0.1,0,0.1,0.1,0.1,0,0,0.1,0.1,0.1,0.1,0,0.1,0.6,0.5,0,0]},{"day_label":"16/10","temp_max":"18.7","temp_min":"16.9","precipitation":"17.40","icon":"ðŸŒ§ï¸","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[18.7,18.6,18.6,18.6,18.6,18.5,18.5,18.3,18.3,18.3,18.3,18.2,18.3,18.1,18.1,17.9,17.6,17.5,17.5,17.7,17.7,17.5,17.1,16.9],"hourly_winds":[12.8,14,14.8,14.8,15.5,16.3,16.1,17.4,18.3,18.7,17.9,18.4,19.2,17.9,19.6,19.9,19.6,19.2,18.4,17.4,16.7,16.5,16.6,16.9],"hourly_precips":[0,0,0,0,0,0,0,0.1,0.2,0.1,0.3,0.5,0.4,0.5,0.6,2.1,2.1,2.1,0.8,0.8,0.8,2,2,2]},{"day_label":"17/10","temp_max":"20.3","temp_min":"16.7","precipitation":"6.30","icon":"ðŸŒ¤ï¸","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[16.8,16.7,16.8,16.9,17.1,17.4,17.8,18.2,18.6,18.9,19.1,19.3,19.4,19.6,19.7,20,20.2,20.3,20.2,20,19.8,19.8,19.8,19.8],"hourly_winds":[18.1,19.2,19.7,19.1,18.3,17,15.5,14.1,11.7,8.6,5.2,3.4,4,6.4,7.6,7.2,9.7,13,13.8,13,11.9,10.6,8.8,7.1],"hourly_precips":[2,2,2,0.1,0.1,0.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"18/10","temp_max":"20.2","temp_min":"19.4","precipitation":"0.00","icon":"â›…","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19.8,19.8,19.8,19.8,19.8,19.8,19.7,19.5,19.4,19.7,19.7,19.7,19.7,19.7,19.8,19.9,20.1,20.2,20.2,20.2,20.2,20.1,19.9,19.7],"hourly_winds":[5.2,4.7,4.2,2.7,9.2,14.3,14.5,12.4,10.8,12.4,12.2,12.4,13,14.1,14.8,14.8,14.4,13.4,11.3,8.7,5.4,1.4,3,6.5],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"19/10","temp_max":"21.3","temp_min":"17.4","precipitation":"0.00","icon":"â˜€ï¸","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19.3,18.8,18.4,18.1,17.9,17.7,17.5,17.4,17.4,17.6,17.9,18.4,19.1,19.9,20.6,21,21.2,21.3,21.2,21.1,20.8,20.4,19.9,19.5],"hourly_winds":[8.3,9.7,10.8,11.1,10.9,10.8,11,11.2,11.5,12.4,13.9,14.4,13.8,12.4,10.7,9,7.8,7,5.9,5.5,7.1,10,13.3,15.7],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}],"updated_at":"13/10/2025, 13:17:30"};
    const days = DATA.days;
    const mergedHourly = DATA.mergedHourly || [];
    const alerts = DATA.alerts || [];
    const advice = DATA.advice || "";
    const updated_at = DATA.updated_at;
    let current = 0;

    /* Copy all your existing utility functions here: rainIntensityIcon, windDescriptor, dailyAdvice, humanDirection, etc. */

    function calculateHsig(waves) {
      if (!waves || !waves.length) return 0;
      const sorted = [...waves].sort((a, b) => b - a);
      const topThird = sorted.slice(0, Math.ceil(waves.length / 3));
      return topThird.reduce((a, b) => a + b, 0) / topThird.length;
    }
    function getDouglasScale(hsig) {
      if (hsig < 0.1) return "0 - Calmo";
      if (hsig < 0.5) return "1 - Quasi calmo";
      if (hsig < 1.25) return "2 - Poco mosso";
      if (hsig < 2.5) return "3 - Mosso";
      if (hsig < 4) return "4 - Molto mosso";
      if (hsig < 6) return "5 - Agitato";
      if (hsig < 9) return "6 - Molto agitato";
      return "7+ - Tempestoso";
    }
    function detectRogueWaveRisk(waves, hsig) {
      if (!waves.length || hsig === 0) return false;
      const maxWave = Math.max(...waves);
      return maxWave > (hsig * 2.2);
    }
    function calculateMean(values) {
      if (!values.length) return 0;
      return values.reduce((a,b) => a+b, 0) / values.length;
    }
    function calculateRange(values) {
      if (!values.length) return 0;
      return Math.max(...values) - Math.min(...values);
    }
    function calculateStdDev(values) {
      if (!values.length) return 0;
      const mean = calculateMean(values);
      const variance = values.reduce((a,b) => a + (b - mean)**2, 0) / values.length;
      return Math.sqrt(variance);
    }
    function marineRiskAdvice(hsig, rogueRisk, windSpeed) {
      let advice = [];
      if (hsig < 0.5) advice.push("Mare calmo, condizioni favorevoli.");
      else if (hsig < 2.5) advice.push("Mare mosso, cautela per attivitÃ  diportistiche.");
      else if (hsig < 4) advice.push("Mare molto mosso, attenzione alla navigazione.");
      else advice.push("Mare agitato o tempestoso, evitare uscita in mare.");
      if (rogueRisk) advice.push("âš ï¸ Presenza di onde anomale! Massima prudenza.");
      if (windSpeed >= 25) advice.push("âš ï¸ Vento forte in arrivo, precauzioni raccomandate.");
      return advice.join(" ");
    }
    function getMarineDataForDay() {
      const day = days && days[current];
      if (!day || !mergedHourly.length) return [];
      let someTime = mergedHourly[0].time;
      const pref_year = someTime.slice(0, 4);
      const [dd, mm] = day.day_label.split('/');
      const dateString = `${pref_year}-${mm.padStart(2,'0')}-${dd.padStart(2,'0')}`;
      return mergedHourly.filter(h => h.time && h.time.startsWith(dateString));
    }
    /* include code for renderMainToday, renderTabs, switchTab and renderCharts as previously */

    let marineChart = null;
    function renderMarine() {
      const canvasWrap = document.querySelector('#marinechartcontainer .canvas-wrap');
      canvasWrap.innerHTML = '<canvas id="marine-wave-chart"></canvas>';
      const marineForDay = getMarineDataForDay();
      const hsig = calculateHsig(marineForDay.map(h => h.wave_height));
      const douglasScale = getDouglasScale(hsig);
      const rogueRisk = detectRogueWaveRisk(marineForDay.map(h => h.wave_height), hsig);
      const waveMean = calculateMean(marineForDay.map(h => h.wave_height));
      const waveRange = calculateRange(marineForDay.map(h => h.wave_height));
      const waveStdDev = calculateStdDev(marineForDay.map(h => h.wave_height));
      const windMax = days[current]?.wind_max || 0;
      const adviceText = marineRiskAdvice(hsig, rogueRisk, windMax);

      const divSummary = document.getElementById('marine-summary');
      if (marineForDay.length) {
        const h = marineForDay[0];
        divSummary.innerHTML = `
          <div style="color:#94dfeb;font-size:1.11em;font-weight:bold;margin-bottom:2px;">
            H<sub>sig</sub> (altezza significativa): ${hsig.toFixed(2)} m
          </div>
          <div style="color:#8ee4af; font-weight:bold; margin-bottom:4px;">
            Scala Douglas: ${douglasScale}
          </div>
          <div style="color:#a0d8ef; margin-top: 8px; font-size: 0.95rem;">
            <div>Media altezza onda: ${waveMean.toFixed(2)} m</div>
            <div>Range onda: ${waveRange.toFixed(2)} m</div>
            <div>Deviazione standard: ${waveStdDev.toFixed(3)} m</div>
          </div>
          <div>
            Altezza onda: ${(h.wave_height??0).toFixed(2)}m,
            direzione swell: ${humanDirection(h.swell_direction)} (${h.swell_direction??'-'}Â°),
            altezza swell: ${(h.swell_height??0).toFixed(2)}m.
          </div>
        `;
      } else {
        divSummary.textContent = "Dati marine non disponibili.";
      }

      const divAlerts = document.getElementById('marine-alerts');
      divAlerts.textContent = adviceText;

      const ctx = document.getElementById('marine-wave-chart').getContext('2d');
      const labels = marineForDay.map(h => h.time && h.time.length > 11 ? h.time.slice(11, 16) : h.time || "");
      const waves = marineForDay.map(h => h.wave_height);
      const swells = marineForDay.map(h => h.swell_height);
      if (marineChart && marineChart.destroy) marineChart.destroy();
      marineChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels,
          datasets: [
            {
              label: 'Altezza onda (m)',
              borderColor: '#25A9FA',
              backgroundColor: 'rgba(30,144,255,0.13)',
              fill: true,
              data: waves,
              borderWidth: 4,
              pointRadius: 3,
              pointBackgroundColor: '#25A9FA',
              tension: 0.28
            },
            {
              label: 'Altezza swell (m)',
              borderColor: '#21D08A',
              backgroundColor: 'rgba(34,255,170,0.10)',
              fill: true,
              data: swells,
              borderWidth: 4,
              pointRadius: 3,
              pointBackgroundColor: '#21D08A',
              tension: 0.28
            }
          ]
        },
        options: {
          responsive: false,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: true,
              labels: {
                color: '#cce6ff',
                font: { size: 22, family: "'Montserrat', 'Roboto', Arial, sans-serif", weight: 'bold' },
                boxWidth: 38,
                boxHeight: 7,
                usePointStyle: true,
                padding: 18
              }
            },
            tooltip: { mode: 'index', intersect: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              title: { display: true, text: 'm', color: '#bae7fd', font: { size: 16, weight: 'bold' } },
              ticks: { color: '#bfe8ff', font: { size: 18, weight: 'bold' }, stepSize: 0.02, maxTicksLimit: 7 }
            },
            x: {
              title: { display: false },
              ticks: { color: '#ddddff', font: { size: 18, family: "'Roboto', Arial", weight: 'bold' }, maxTicksLimit: 8, padding: 8 }
            }
          },
          layout: { padding: { top: 10, bottom: 11, left: 8, right: 12 } }
        }
      });
    }

    /* Include renderMainToday, renderTabs, switchTab, renderCharts, renderAll as before unchanged */

    function renderAll() {
      if (!days || days.length === 0) {
        document.body.innerHTML = "<h2 style='color:#fff'>Nessun dato meteo disponibile!</h2>";
        return;
      }
      renderMainToday();
      renderTabs();
      renderCharts();
      renderMarine();
      document.getElementById('footer').innerHTML = `Powered by Open-Meteo â€¢ UI by micheledv74 â€¢ Ultimo agg.: <span id="updated_stamp">${updated_at}</span>`;
    }
    renderAll();
  </script>
</body>
</html>
