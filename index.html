<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
  <title>Meteo Procida – Dashboard</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Roboto&display=swap');
    html { box-sizing: border-box; } *,*:before,*:after { box-sizing: inherit; }
    body { font-family: 'Roboto', Arial, sans-serif; max-width: 1000px; margin: 0 auto; background: linear-gradient(135deg, #26365a, #3498db 92%); color: #f0f8ff; padding: 14px 2px 18px 2px; min-height: 100vh; }
    .header { font-family: 'Montserrat', sans-serif; font-size: 2.05em; font-weight: 900; text-align: center; color: #cfe9ff; text-shadow: 1px 2px 14px #09172a; letter-spacing: 2px; margin-bottom: 14px; position: relative;}
    .week-cards-bar { display: flex; flex-wrap: nowrap; gap: 17px; justify-content: center; margin: 7px auto 19px auto; width: 99%; max-width: 990px; overflow-x: auto; }
    .mini-card {
      min-width: 107px; max-width: 153px; min-height: 86px;
      background: linear-gradient(115deg,#22396a 92%,#255992 100%);
      border-radius: 21px;
      box-shadow: 0 4.5px 20px #233b5e38, 0 1px 7px #26337709;
      padding: 10px 13px 12px 13px;
      display: flex; flex-direction: column; align-items: flex-start; position: relative;
      cursor: pointer; user-select: none;
      border: 2px solid transparent;
      transition: box-shadow 0.22s, transform 0.19s, border 0.14s, background 0.16s;
      margin-bottom: 0; outline: none;
    }
    .mini-card.active {
      border: 2px solid #8de8fa;
      background: linear-gradient(115deg,#22396a 92%,#255992 100%);
      transform: scale(1.03);
      box-shadow: 0 2.5px 14px #29448826, 0 1.5px 0 #42e9fa10;
    }
    .mini-card .giorno-sett {
      font-family: 'Montserrat',sans-serif; font-size: 1.09em;
      font-weight: 900; letter-spacing: 0.6px; margin-bottom: -2px;
      line-height: 1.14em; margin-top: 2px;
      display: block;
    }
    .giorno-celeste { color: #8de8fa; }
    .giorno-azzurro { color: #42e9fa; }
    .giorno-arancio { color: #ffd472; }
    .mini-card .data-num { font-size: 1.03em; color: #f7fbfe; font-weight: 900; letter-spacing: 1px; margin-right:7px; }
    .mini-card .icon-meteo { font-size: 1.35em; margin: 0 0 2px 3px;vertical-align:-2px;}
    .mini-card-row { display: flex; flex-direction: row; align-items: center; margin-top: 3px; }
    .arrow-up { color: #ffd472; font-size: 1em; font-weight: 400; margin-right: 3px;}
    .arrow-down { color: #6fd7f8; font-size: 1em; font-weight: 400; margin-left: 6px; margin-right: 2px;}
    .t-max { color: #ffd472; font-size: 1.14em; font-weight: 900; margin-right:1px;}
    .t-min { color: #6fd7f8; font-size: 1.14em; font-weight: 900;}
    .mini-card .degree { font-size: 0.89em; }
    /* Dashboard classica sotto */
    .dashboard { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: auto auto; gap: 30px 30px; width: 99%; margin: 0 auto 20px auto;}
    .box { background: linear-gradient(125deg, #23406c 92%, #2e8cc9 100%); border-radius: 18px; box-shadow: 0 8px 26px 0 #06183970; padding: 24px 17px 22px 17px; min-width: 210px; min-height: 215px; display: flex; flex-direction: column; align-items: center; position: relative; transition: box-shadow 0.22s, transform 0.22s;}
    .box:focus-within, .box:hover { box-shadow: 0 0 24px #2c9efa99, 0 8px 27px #06183980; transform: translateY(-3px) scale(1.012); z-index: 2;}
    .box-title { font-size: 1.39rem; font-weight: 900; color: #b8f6ff; letter-spacing: 1px; margin-bottom: 8px; text-shadow: 1px 1px 8px #03182b45; font-family: 'Montserrat', sans-serif; display: flex; align-items: center; gap: 8px; }
    .box .main { font-weight: 700; font-size: 1.10em; color: #84dbff; }
    .box .desc { margin: 6px 0 0 0; font-size:1.01em; color: #c3ccdf;}
    .box-meteo-list { margin: 16px 0 0 0; font-size: 1.13em; color: #b8f6ff; display: flex; flex-direction: column; gap:4px; align-items:center;}
    .box-meteo-row {display:flex; gap:13px; flex-direction:row;}
    .box-meteo-max { color: #ffd472; margin-right:6px;}
    .box-meteo-min { color: #6fd7f8;}
    .box-meteo-dir { color: #8de8fa;}
    .box-meteo-hsig { color: #a1e7ff;}
    .box-meteo-range { color: #8cffc3;}
    .box-meteo-std { color: #abbbf8;}
    .box-meteo-hour { color: #e0deff;}
    .box-meteo-temp { color: #ffb2e6;}
    .footer { margin-top: 32px; text-align: center; color: #dbefff; font-size: 17px; font-weight: 500; text-shadow: 0 2px 6px #283c5880;}
    .update-label { color: #ffe09c; margin-left: 18px; font-size: 15px; }
    @media (max-width: 1040px) {.week-cards-bar { gap:8px;}.mini-card { min-width: 95px;}}
    @media (max-width: 650px) {.week-cards-bar { gap:5px;}.mini-card { min-width: 87px; font-size: 0.92em;}}
    @media (max-width: 540px) {.week-cards-bar { gap:2.5px;}.mini-card { min-width: 71px; font-size: 0.86em; max-width:100px;}}
    @media (max-width: 880px) {.dashboard { grid-template-columns: 1fr; grid-template-rows: auto auto auto auto; gap: 13px 0; max-width: none;} }
    @media (max-width: 800px) { .box { min-width: 170px; max-width: 97vw;} }
    @media (max-width: 540px) { .box { min-width:1px;}}
  </style>
</head>
<body>
  <div class="header">METEO PROCIDA</div>
  <div class="week-cards-bar" id="miniCardsBar"></div>
  <div class="dashboard">
    <section class="box vento" id="windbox"></section>
    <section class="box pioggia" id="rainbox"></section>
    <section class="box mare" id="seabox"></section>
    <section class="box pressione" id="pressbox"></section>
  </div>
  <div class="footer" id="footer"></div>
  <script>
    // Simulazione (in produzione: usa direttamente [object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]):
    const jsonInput = {
      days: [
        {
          day_label: "16/10", temp_max: 20, temp_min: 14, icon: "⛅",
          wind: 12, wind_max: 18, wind_min: 5, gust: 21, wind_dir: "SO", wind_dir_max_deg: 220, wind_dir_max_label: "Libeccio",
          rain: 0, rain_max_hour: 0, rain_max_time: "--:--",
          sea_hsig: 0.3, sea_range: 0.6, sea_std: 0.13, sea_temp: 22.7,
          pressure_max: 1017.8, pressure_min: 1012.3, pressure_avg: 1015.7
        },
        {
          day_label: "17/10", temp_max: 19, temp_min: 11, icon: "🌦️",
          wind: 13, wind_max: 21, wind_min: 6, gust: 25, wind_dir: "N", wind_dir_max_deg: 10, wind_dir_max_label: "Tramontana",
          rain: 1.2, rain_max_hour: 0.7, rain_max_time: "13:00",
          sea_hsig: 0.4, sea_range: 0.7, sea_std: 0.18, sea_temp: 22.3,
          pressure_max: 1018.4, pressure_min: 1014.5, pressure_avg: 1016.9
        },
        {
          day_label: "18/10", temp_max: 21, temp_min: 13, icon: "🌤️",
          wind: 11, wind_max: 16, wind_min: 7, gust: 17, wind_dir: "NE", wind_dir_max_deg: 45, wind_dir_max_label: "Grecale",
          rain: 0, rain_max_hour: 0, rain_max_time: "--:--",
          sea_hsig: 0.3, sea_range: 0.5, sea_std: 0.12, sea_temp: 22.0,
          pressure_max: 1019.1, pressure_min: 1016.7, pressure_avg: 1018.2
        },
        {
          day_label: "19/10", temp_max: 17, temp_min: 10, icon: "🌧️",
          wind: 18, wind_max: 27, wind_min: 9, gust: 32, wind_dir: "O", wind_dir_max_deg: 270, wind_dir_max_label: "Ponente",
          rain: 4.7, rain_max_hour: 2.3, rain_max_time: "07:00",
          sea_hsig: 0.7, sea_range: 1.0, sea_std: 0.22, sea_temp: 21.0,
          pressure_max: 1015.4, pressure_min: 1010.2, pressure_avg: 1012.5
        },
        {
          day_label: "20/10", temp_max: 22, temp_min: 15, icon: "☀️",
          wind: 9, wind_max: 14, wind_min: 3, gust: 16, wind_dir: "SE", wind_dir_max_deg: 130, wind_dir_max_label: "Scirocco",
          rain: 0, rain_max_hour: 0, rain_max_time: "--:--",
          sea_hsig: 0.4, sea_range: 0.8, sea_std: 0.13, sea_temp: 22.1,
          pressure_max: 1017.5, pressure_min: 1013.7, pressure_avg: 1016.1
        },
        {
          day_label: "21/10", temp_max: 23, temp_min: 16, icon: "🌩️",
          wind: 25, wind_max: 33, wind_min: 16, gust: 37, wind_dir: "N", wind_dir_max_deg: 360, wind_dir_max_label: "Tramontana",
          rain: 2.1, rain_max_hour: 1.2, rain_max_time: "22:00",
          sea_hsig: 0.8, sea_range: 1.5, sea_std: 0.27, sea_temp: 20.7,
          pressure_max: 1015.1, pressure_min: 1008.4, pressure_avg: 1011.2
        },
        {
          day_label: "22/10", temp_max: 18, temp_min: 13, icon: "⛅",
          wind: 14, wind_max: 19, wind_min: 8, gust: 21, wind_dir: "O", wind_dir_max_deg: 280, wind_dir_max_label: "Ponente",
          rain: 0, rain_max_hour: 0, rain_max_time: "--:--",
          sea_hsig: 0.2, sea_range: 0.6, sea_std: 0.09, sea_temp: 21.0,
          pressure_max: 1016.7, pressure_min: 1012.4, pressure_avg: 1014.8
        }
      ]
    };

    function getDayName(dateStr) {
      let gg, mm, yyyy;
      if (dateStr.includes('/')) {
        [gg, mm] = dateStr.split('/');
        yyyy = new Date().getFullYear();
      } else if (dateStr.includes('-')) {
        [yyyy, mm, gg] = dateStr.split('-');
      }
      let dt = new Date(`${yyyy}-${mm}-${gg}`);
      const giorni = ["Domenica", "Lunedì", "Martedì", "Mercoledì", "Giovedì", "Venerdì", "Sabato"];
      return {nome: giorni[dt.getDay()], idx: dt.getDay()};
    }
    function dayColorClass(idx) {
      if (idx>=1 && idx<=5) return "giorno-celeste";
      if (idx===6) return "giorno-azzurro";
      if (idx===0) return "giorno-arancio";
      return "";
    }
    let selectedDayIndex = 0;
    function renderMiniCardsBar() {
      let out = '';
      for (let i = 0; i < jsonInput.days.length; i++) {
        const d = jsonInput.days[i];
        const dayInfo = getDayName(d.day_label);
        const colorClass = dayColorClass(dayInfo.idx);
        out += `
        <div class="mini-card${i===selectedDayIndex?" active":""}" onclick="selectDay(${i})">
          <span class="giorno-sett ${colorClass}">${dayInfo.nome}</span>
          <div class="mini-card-row" style="margin-bottom:2px;">
            <span class="data-num">${d.day_label}</span>
            <span class="icon-meteo">${d.icon}</span>
          </div>
          <div class="mini-card-row">
            <span class="arrow-up">↑</span><span class="t-max">${d.temp_max}<span class="degree">°</span></span>
            <span class="arrow-down">↓</span><span class="t-min">${d.temp_min}<span class="degree">°</span></span>
          </div>
        </div>`;
      }
      document.getElementById("miniCardsBar").innerHTML = out;
    }

    function selectDay(i) {
      selectedDayIndex = i;
      renderMiniCardsBar();
      renderAll();
    }

    function renderWind() {
      const d = jsonInput.days[selectedDayIndex];
      document.getElementById("windbox").innerHTML = `
        <div class="box-title">Vento</div>
        <div class="main">
          Intensità media: <span class="box-meteo-max">${d.wind} km/h</span>
          Folata max: <span class="box-meteo-max">${d.gust} km/h</span>
          <br>
          <span class="box-meteo-list">
            <span class="box-meteo-row">
              <span class="box-meteo-max">Max: ${d.wind_max} km/h</span> 
              <span class="box-meteo-hour">Min: ${d.wind_min} km/h</span>
            </span>
            <span class="box-meteo-row">
              <span class="box-meteo-dir">Direzione max: ${d.wind_dir_max_deg}° ${d.wind_dir_max_label}</span>
            </span>
          </span>
        </div>
      `;
    }
    function renderRain() {
      const d = jsonInput.days[selectedDayIndex];
      document.getElementById("rainbox").innerHTML = `
        <div class="box-title">Pioggia</div>
        <div class="main">
          Precipitazioni totali: <span class="box-meteo-max">${d.rain} mm</span>
          <br>
          <span class="box-meteo-list">
            <span class="box-meteo-row">
              <span class="box-meteo-max">Max oraria: ${d.rain_max_hour} mm</span>
              <span class="box-meteo-hour">Ora più piovosa: ${d.rain_max_time}</span>
            </span>
          </span>
        </div>
      `;
    }
    function renderSea() {
      const d = jsonInput.days[selectedDayIndex];
      document.getElementById("seabox").innerHTML = `
        <div class="box-title">Mare</div>
        <div class="main">
          Altezza media onda: <span class="box-meteo-hsig">${d.sea_hsig} m</span>
          <br>
          <span class="box-meteo-list">
            <span class="box-meteo-row">
              <span class="box-meteo-range">Range: ${d.sea_range} m</span>
              <span class="box-meteo-std">Dev.Std.: ${d.sea_std} m</span>
              <span class="box-meteo-temp">Temp. mare: ${d.sea_temp} °C</span>
            </span>
          </span>
        </div>
      `;
    }
    function renderPress() {
      const d = jsonInput.days[selectedDayIndex];
      document.getElementById("pressbox").innerHTML = `
        <div class="box-title">Pressione</div>
        <div class="main">
          Media: <span class="box-meteo-hsig">${d.pressure_avg} hPa</span>
          <br>
          <span class="box-meteo-list">
            <span class="box-meteo-row">
              <span class="box-meteo-max">Max: ${d.pressure_max} hPa</span>
              <span class="box-meteo-min">Min: ${d.pressure_min} hPa</span>
            </span>
          </span>
        </div>
      `;
    }

    function renderAll() {
      renderWind();
      renderRain();
      renderSea();
      renderPress();
      document.getElementById("footer").innerHTML =
        `Powered by Open-Meteo • UI by micheledv74`;
    }

    renderMiniCardsBar();
    renderAll();
  </script>
</body>
</html>
