<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Previsioni Procida - Meteo Giornaliero</title>
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; max-width: 900px; margin: auto; background: linear-gradient(135deg,#18203e,#37548a 96%); color: #fff; padding: 20px;}
    .tabs { display: flex; gap: 10px; margin-bottom: 28px; flex-wrap: wrap; justify-content: center;}
    .tab { background: rgba(255,255,255,0.14); border: 2px solid #33d1f1; padding: 14px 24px; border-radius: 12px; cursor: pointer; transition: background 0.22s;}
    .tab.active { background: #0a71df; box-shadow: 0 3px 18px #3bf8ff24; color: #fff; border-bottom: 4px solid #44eaff; font-weight: bold;}
    .tab .bigicon { font-size: 1.7em;}
    .tab:hover { background: #1799cf;}
    .card { background: linear-gradient(125deg,rgba(43,80,123,0.14),rgba(255,255,255,0.09)); border-radius:20px; padding:29px 18px 22px 22px; margin-bottom:22px; box-shadow: 0 3px 18px rgba(33,87,142,0.11);}
    .bigicon { font-size:86px; filter: drop-shadow(0 2px 8px #009bff66);}
    .tempmax { font-size:36px; font-weight:900; letter-spacing:-1.5px;}
    .tempmin { font-size:22px; color:#79e7ff; font-weight:600;}
    .details { font-size:16px; color:#d3f3ff;}
    .underline { border-bottom: 2.3px solid #24e7fa88;}
    .chart-title { font-size:19px; font-weight:bold; margin-bottom: 4px; letter-spacing:0.15em; color:#acf;}
    .chart-container { width: 100%; max-width: 900px; margin: 0 auto 25px auto;}
    canvas { width: 100% !important; height: 245px !important; max-width: 100%; display: block; background: rgba(255,255,255,0.10); border-radius:12px; transition: box-shadow 0.3s;}
    #daycard .bigicon { margin-bottom: 12px;}
    .footer { margin-top: 34px; text-align: center; color: #cbebff; font-size: 17px; opacity: 0.88;}
    .card-anim { animation: appearCard 0.4s;}
    @keyframes appearCard {
      from { opacity:0; transform: translateY(30px);}
      to { opacity:1; transform: translateY(0);}
    }
    /* tooltips migliorati */
    .chartjs-tooltip { background: #17243c !important; opacity: 0.94 !important; border-radius: 7px !important; border: 2px solid #1badff !important; color: #fff !important;}
    /* mobile */
    @media (max-width: 700px) {
      .chart-container { max-width: 99vw; padding: 0 1vw;}
      .main-card, .card { font-size: 0.98em;}
      .bigicon { font-size: 50px;}
      .tempmax { font-size: 1.4em;}
      .tab { padding: 10px 4px; font-size:1em;}
    }
    @media (orientation: landscape) and (max-width: 820px) {
      .chart-container { max-width: 97vw; min-width: 120px;}
      canvas { min-height: 80px;}
    }
    ::selection { background: #acecffd0;}
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div id="tabbar" class="tabs"></div>
<div id="daycard"></div>
<div class="chart-container" id="chartcontainer"></div>
<div class="chart-container" id="windchartcontainer"></div>
<div class="chart-container" id="rainchartcontainer"></div>
<div class="footer"><b>Powered by Open-Meteo</b> · UI by micheledv74 · Ultimo agg.: <span id="upd"></span></div>
<script>
const DATA = {"days":[{"day_label":"11/10","temp_max":"23.5","temp_min":"19.8","precipitation":"0.00","icon":"☀️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[21,20.9,20.8,20.7,20.3,19.9,19.9,19.9,19.8,20,20.5,21.4,22.2,22.8,23.5,23.3,21.9,21.9,21.7,21.6,21.4,21.4,21.5,21.4],"hourly_winds":[5.6,4.7,5.4,5.2,5.1,4.7,5.4,5.8,6.5,6.2,6.6,7.7,8.2,7.3,4.4,5.5,10.1,10,10.2,10,9.5,8.6,6.2,6.9],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"12/10","temp_max":"21.3","temp_min":"19.5","precipitation":"0.00","icon":"☀️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[20.9,20.5,20.3,20.1,19.9,19.7,19.6,19.5,19.5,19.6,19.8,20.2,20.6,20.8,21,21.1,21.2,21.3,20.9,20.7,20.5,20.5,20.4,20.3],"hourly_winds":[8.1,8.5,8.6,9.6,10.4,11.1,11.1,9.9,8.7,8,7.1,6,4.5,3.1,4.1,4.3,6,8,7.8,6.1,6.1,6.4,5,3.6],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"13/10","temp_max":"21.0","temp_min":"19.2","precipitation":"0.00","icon":"☀️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[20.2,20,19.8,19.6,19.5,19.4,19.4,19.3,19.2,19.3,19.3,19.5,19.8,20.1,20.3,20.5,21,21,20.8,20.6,20.5,20.4,20.4,20.3],"hourly_winds":[2.4,3,3.6,3.7,2.6,2.6,2.5,2.2,3,3.3,3.2,3.6,3.2,1.8,2.6,4.1,6.4,8.1,8.1,7.2,7.1,5.9,3.9,3],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"14/10","temp_max":"20.4","temp_min":"18.8","precipitation":"0.00","icon":"🌤️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[20,19.7,19.6,19.4,19.3,19.2,19,18.9,18.8,18.8,18.9,19.3,19.6,20,20.2,20.3,20.4,20.4,20.3,20,19.9,19.9,20,20],"hourly_winds":[3.1,3.1,2.9,3.8,3.4,2.9,2.5,3,4.1,4.3,4.3,3.3,3.5,4.8,5.4,5.9,6.1,5.4,2.5,5,8.9,9.7,9,8.9],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"15/10","temp_max":"22.0","temp_min":"18.5","precipitation":"0.00","icon":"⛅","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19.9,19.7,19.5,19.3,19.1,18.9,18.7,18.5,18.5,18.7,19.1,19.6,20.3,21.1,21.7,21.9,22,21.8,21.3,20.5,19.8,19.3,18.9,18.6],"hourly_winds":[9.5,10.1,10.9,11.4,12.1,12.6,13.4,14.4,15.5,17.1,18.5,18.9,17.6,15.8,15.4,16.6,18.8,20.5,21.9,23.6,24.6,24.7,24.2,23.9],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"16/10","temp_max":"19.0","temp_min":"17.4","precipitation":"0.00","icon":"⛅","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[18.3,18.1,17.9,17.8,17.7,17.6,17.5,17.4,17.4,17.8,18.2,18.6,18.8,18.9,19,19,18.9,18.7,18.4,18,17.7,17.6,17.5,17.5],"hourly_winds":[24.2,24.8,25.3,25.5,25.7,26,26.2,26.5,26.5,26.9,28.6,29.5,29,27.6,26,24.5,23.1,21.3,19.9,18.7,17.7,16.1,14.5,13],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"day_label":"17/10","temp_max":"19.5","temp_min":"16.6","precipitation":"0.00","icon":"⛅","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[17.5,17.4,17.3,17.2,17.1,16.9,16.8,16.6,16.6,16.9,17.4,17.9,18.5,19.1,19.5,19.5,19.3,19.2,19.2,19.2,19.2,19.1,19,18.9],"hourly_winds":[11.8,10.8,10,9.7,9.2,8.9,8.8,8.9,8.8,9,9,8.8,8.3,9.5,11.4,12.3,12.3,12,10.9,9.4,7.9,7.2,6.7,6.4],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}],"updated_at":"11/10/2025, 17:42:01"};
const days = DATA.days;
const updated_at = DATA.updated_at;
let current = 0;

function renderTabs() {
  const tabbar = document.getElementById('tabbar');
  tabbar.innerHTML = '';
  days.forEach((d, idx) => {
    const el = document.createElement('div');
    el.className = idx === current ? 'tab active' : 'tab';
    el.innerHTML = `<div class="bigicon">${d.icon}</div>
      <div>${d.day_label}</div>
      <div><span class="tempmax">${d.temp_max}°</span> <span class="tempmin">${d.temp_min}°</span></div>`;
    el.onclick = () => { current = idx; renderAll(); };
    tabbar.appendChild(el);
  });
}

function renderCard() {
  const d = days[current];
  document.getElementById('daycard').innerHTML = `<div class="card underline card-anim">
    <div style="display:flex;align-items:center;gap:24px;">
      <div class="bigicon">${d.icon}</div>
      <div>
        <div class="tempmax">${d.temp_max}°C <span class="tempmin">${d.temp_min}°C</span></div>
        <div class="details">Precipitazioni: ${d.precipitation} mm<br>
        </div>
      </div>
    </div>
  </div>`;
}

let tempChart = null, windChart = null, rainChart = null;
function renderCharts() {
  const d = days[current];
  document.getElementById('chartcontainer').innerHTML =
    `<div class="card card-anim"><div class="chart-title">Temperatura oraria (°C)</div><canvas id="chart"></canvas></div>`;
  const ctx1 = document.getElementById('chart').getContext('2d');
  if (tempChart) tempChart.destroy();
  tempChart = new Chart(ctx1, {
    type: 'line',
    data: {
      labels: d.hourly_labels,
      datasets: [{
        label: 'Temperatura (°C)',
        data: d.hourly_temps,
        borderColor: 'rgba(255,214,91,1)',
        backgroundColor: 'rgba(255,214,91,0.15)',
        fill: true,
        tension: 0.3,
        pointRadius: 2
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display:false }, tooltip: {enabled:true,mode:'index',intersect:false} },
      scales: {
        y: { beginAtZero: false, title: { display: true, text: '°C', color: '#fff' }, ticks: { color:'#fff', font: {weight:'bold'} }},
        x: { title: { display: true, text: 'Ora locale', color:'#fff' }, ticks: { color: '#fff', font: {weight:'bold', size:15}, maxRotation:0, minRotation:0 } }
      }
    }
  });
  document.getElementById('windchartcontainer').innerHTML =
    `<div class="card card-anim"><div class="chart-title">Vento orario (km/h)</div><canvas id="windchart"></canvas></div>`;
  const ctx2 = document.getElementById('windchart').getContext('2d');
  if (windChart) windChart.destroy();
  windChart = new Chart(ctx2, {
    type: 'line',
    data: {
      labels: d.hourly_labels,
      datasets: [{
        label: 'Vento (km/h)',
        data: d.hourly_winds,
        borderColor: 'rgba(90,184,255,1)',
        backgroundColor: 'rgba(90,184,255,0.18)',
        fill: true,
        tension: 0.3,
        pointRadius: 2
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display:false}, tooltip: {enabled:true,mode:'index',intersect:false} },
      scales: {
        y: { beginAtZero: true, title: { display: true, text: 'km/h', color: '#fff' }, ticks: { color:'#fff', font: {weight:'bold'} }},
        x: { title: { display: true, text: 'Ora locale', color: '#fff' }, ticks: { color: '#fff', font: {weight:'bold', size:15}, maxRotation:0, minRotation:0 } }
      }
    }
  });
  document.getElementById('rainchartcontainer').innerHTML =
    `<div class="card card-anim"><div class="chart-title">Precipitazioni orarie (mm)</div><canvas id="rainchart"></canvas></div>`;
  const ctx3 = document.getElementById('rainchart').getContext('2d');
  if (rainChart) rainChart.destroy();
  rainChart = new Chart(ctx3, {
    type: 'bar',
    data: {
      labels: d.hourly_labels,
      datasets: [{
        label: 'Precipitazioni (mm)',
        data: d.hourly_precips,
        backgroundColor: 'rgba(30,180,255,0.73)',
        borderColor: 'rgba(13,80,180,1)',
        borderWidth: 1,
        minBarLength: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display:false}, tooltip: {enabled:true,mode:'index',intersect:false} },
      scales: {
        y: { beginAtZero: true, title: { display: true, text: 'mm', color: '#fff' }, ticks: { color:'#fff', font: {weight:'bold'} }},
        x: { title: { display: true, text: 'Ora locale', color: '#fff' }, ticks: { color: '#fff', font: {weight:'bold', size:15}, maxRotation:0, minRotation:0 } }
      }
    }
  });
}
function renderAll() {
  if (!days || days.length === 0) {
    document.body.innerHTML = "<h2 style='color:#fff'>Nessun dato meteo disponibile!</h2>";
    return;
  }
  renderTabs();
  renderCard();
  renderCharts();
  document.getElementById('upd').textContent = updated_at;
}
renderAll();
</script>
</body>
</html>
