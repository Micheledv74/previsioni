<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
  <title>Previsioni Procida • Dashboard Meteo</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Roboto&display=swap');
    html,body { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Roboto',sans-serif; background:linear-gradient(135deg,#26365a,#3498db 92%); color:#f0f8ff; padding:12px; max-width:1000px; margin:0 auto; min-height:100vh; }
    .header { font-family:'Montserrat',sans-serif; font-size:2.5rem; text-align:center; color:#cfe9ff; text-shadow:1px 2px 14px #09172a; margin-bottom:18px; }
    .dashboard { display:flex; flex-wrap:wrap; justify-content:center; gap:18px; }
    .large-day { background:rgba(37,59,102,0.24); border-radius:22px; box-shadow:0 6px 28px #061b3282; padding:18px; flex:1 1 900px; color:#a9edff; }
    .large-day h2 { font-size:1.6rem; margin-bottom:9px; }
    .message { margin-top:12px; background:rgba(44,88,235,0.08); padding:10px 18px; border-radius:10px; font-weight:700; color:#54e2ff; }
    .mini-grid { display:flex; justify-content:center; gap:14px; max-width:900px; margin-top:18px; }
    .mini-day { background:rgba(30,50,90,0.26); border-radius:14px; flex:1; min-width:100px; cursor:pointer; text-align:center; padding:12px; transition:background 0.3s; color:#c6f3ff; box-shadow:0 2px 10px #052a57aa; }
    .mini-day.selected, .mini-day:hover { background:#54e2ff33; color:#0077cc; }
    .mini-day .day-label { font-weight:800; margin-bottom:8px; }
    .mini-day .icon { font-size:1.6rem; margin-bottom:6px; }
    .mini-day .temps { font-weight:700; margin-bottom:3px; }
    .mini-day .wind, .mini-day .rain { font-size:0.9rem; }
    .boxes-row { display:flex; justify-content:center; gap:22px; flex-wrap:wrap; max-width:900px; margin-top:22px; }
    .box { background:rgba(37,59,102,0.22); border-radius:22px; box-shadow:0 6px 28px #061b3282; padding:17px; flex:1 1 320px; max-width:430px; min-width:280px; display:flex; flex-direction:column; color:#ccefff; }
    .box-title { font-size:1.28rem; font-weight:900; margin-bottom:12px; font-family:'Montserrat',sans-serif; }
    .box-main { font-weight:700; font-size:1.15rem; color:#319dde; margin-bottom:5px; }
    .box-desc { font-size:1rem; font-weight:500; margin-bottom:12px; color:#cde9ffcc; }
    button.detail-btn { margin-top:auto; background:#127af7; color:#fff; border:none; border-radius:8px; padding:10px 26px; cursor:pointer; transition:background 0.16s; }
    button.detail-btn:hover { background:#45bafe; }
    .detail-section { display:none; margin-top:14px; max-height:320px; overflow-y:auto; }
    .detail-section.active { display:block; }
    .chart-wrap { width:100%; height:280px; background:#192b56dd; padding:12px; border-radius:12px; box-sizing:border-box; }
    .info-chip-container { display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:8px; }
    .info-chip { background:#2287cc33; border-radius:11px; padding:9px 12px; font-weight:600; color:#5db6e7; font-size:0.92rem; min-width:72px; text-align:center; }
    .chip-wind { background:#27b3ff44; color:#0a525f; }
    .chip-rain { background:#53f1c744; color:#116145; }
    .chip-temp { background:#ffd68f44; color:#543c0d; }
    .chip-press { background:#fadc6f44; color:#6b5c1a; }
    @media(max-width:900px){ .dashboard,.mini-grid,.boxes-row{max-width:98vw;margin:0 auto;flex-wrap:wrap;} .box,.mini-day{max-width:97vw;} }
    @media(max-width:600px){ .dashboard{flex-direction:column;align-items:center;} .mini-grid{flex-wrap:wrap;} .mini-day{min-width:105px;font-size:0.88rem;} .box{min-width:100%;max-width:98vw;} }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="header">PREVISIONI METEO PROCIDA</div>
  <div class="dashboard">
    <section class="large-day" id="day-today"></section>
    <div class="mini-grid" id="mini-row1"></div>
    <div class="mini-grid" id="mini-row2"></div>
    <div class="boxes-row">
      <section class="box" id="windbox"></section>
      <section class="box" id="rainbox"></section>
      <section class="box" id="seabox"></section>
      <section class="box" id="pressbox"></section>
    </div>
  </div>
  <div class="footer" id="footer"></div>
<script>
// Dati dinamici: sostituisci con il tuo JSON da n8n
const DATA = {"mergedHourly":[{"time":"2025-10-15T00:00","wave_height":0.04,"swell_height":0.04,"swell_direction":219,"sea_surface_temperature":21.4},{"time":"2025-10-15T01:00","wave_height":0.04,"swell_height":0.04,"swell_direction":219,"sea_surface_temperature":21.4},{"time":"2025-10-15T02:00","wave_height":0.04,"swell_height":0.04,"swell_direction":218,"sea_surface_temperature":21.4},{"time":"2025-10-15T03:00","wave_height":0.06,"swell_height":0.06,"swell_direction":218,"sea_surface_temperature":21.4},{"time":"2025-10-15T04:00","wave_height":0.08,"swell_height":0.08,"swell_direction":218,"sea_surface_temperature":21.4},{"time":"2025-10-15T05:00","wave_height":0.1,"swell_height":0.1,"swell_direction":218,"sea_surface_temperature":21.3},{"time":"2025-10-15T06:00","wave_height":0.12,"swell_height":0.12,"swell_direction":218,"sea_surface_temperature":21.3},{"time":"2025-10-15T07:00","wave_height":0.14,"swell_height":0.14,"swell_direction":218,"sea_surface_temperature":21.3},{"time":"2025-10-15T08:00","wave_height":0.16,"swell_height":0.16,"swell_direction":218,"sea_surface_temperature":21.3},{"time":"2025-10-15T09:00","wave_height":0.18,"swell_height":0.18,"swell_direction":218,"sea_surface_temperature":21.3},{"time":"2025-10-15T10:00","wave_height":0.2,"swell_height":0.18,"swell_direction":217,"sea_surface_temperature":21.3},{"time":"2025-10-15T11:00","wave_height":0.22,"swell_height":0.2,"swell_direction":217,"sea_surface_temperature":21.3},{"time":"2025-10-15T12:00","wave_height":0.24,"swell_height":0.2,"swell_direction":217,"sea_surface_temperature":21.3},{"time":"2025-10-15T13:00","wave_height":0.26,"swell_height":0.22,"swell_direction":216,"sea_surface_temperature":21.3},{"time":"2025-10-15T14:00","wave_height":0.28,"swell_height":0.22,"swell_direction":216,"sea_surface_temperature":21.3},{"time":"2025-10-15T15:00","wave_height":0.3,"swell_height":0.24,"swell_direction":216,"sea_surface_temperature":21.3},{"time":"2025-10-15T16:00","wave_height":0.32,"swell_height":0.24,"swell_direction":215,"sea_surface_temperature":21.3},{"time":"2025-10-15T17:00","wave_height":0.34,"swell_height":0.26,"swell_direction":215,"sea_surface_temperature":21.3},{"time":"2025-10-15T18:00","wave_height":0.36,"swell_height":0.26,"swell_direction":215,"sea_surface_temperature":21.2},{"time":"2025-10-15T19:00","wave_height":0.38,"swell_height":0.28,"swell_direction":215,"sea_surface_temperature":21.2},{"time":"2025-10-15T20:00","wave_height":0.4,"swell_height":0.28,"swell_direction":215,"sea_surface_temperature":21.2},{"time":"2025-10-15T21:00","wave_height":0.42,"swell_height":0.3,"swell_direction":215,"sea_surface_temperature":21.2},{"time":"2025-10-15T22:00","wave_height":0.44,"swell_height":0.3,"swell_direction":215,"sea_surface_temperature":21.2},{"time":"2025-10-15T23:00","wave_height":0.46,"swell_height":0.32,"swell_direction":215,"sea_surface_temperature":21.2},{"time":"2025-10-16T00:00","wave_height":0.46,"swell_height":0.32,"swell_direction":215,"sea_surface_temperature":21.2},{"time":"2025-10-16T01:00","wave_height":0.48,"swell_height":0.34,"swell_direction":216,"sea_surface_temperature":21.2},{"time":"2025-10-16T02:00","wave_height":0.48,"swell_height":0.34,"swell_direction":216,"sea_surface_temperature":21.2},{"time":"2025-10-16T03:00","wave_height":0.5,"swell_height":0.34,"swell_direction":216,"sea_surface_temperature":21.2},{"time":"2025-10-16T04:00","wave_height":0.5,"swell_height":0.36,"swell_direction":215,"sea_surface_temperature":21.1},{"time":"2025-10-16T05:00","wave_height":0.52,"swell_height":0.36,"swell_direction":215,"sea_surface_temperature":21.1},{"time":"2025-10-16T06:00","wave_height":0.56,"swell_height":0.36,"swell_direction":194,"sea_surface_temperature":21.1},{"time":"2025-10-16T07:00","wave_height":0.62,"swell_height":0.36,"swell_direction":172,"sea_surface_temperature":21.1},{"time":"2025-10-16T08:00","wave_height":0.66,"swell_height":0.36,"swell_direction":151,"sea_surface_temperature":21.1},{"time":"2025-10-16T09:00","wave_height":0.7,"swell_height":0.4,"swell_direction":150,"sea_surface_temperature":21.1},{"time":"2025-10-16T10:00","wave_height":0.72,"swell_height":0.44,"swell_direction":149,"sea_surface_temperature":21.1},{"time":"2025-10-16T11:00","wave_height":0.76,"swell_height":0.48,"swell_direction":148,"sea_surface_temperature":21.1},{"time":"2025-10-16T12:00","wave_height":0.76,"swell_height":0.5,"swell_direction":148,"sea_surface_temperature":21.1},{"time":"2025-10-16T13:00","wave_height":0.78,"swell_height":0.52,"swell_direction":149,"sea_surface_temperature":21.1},{"time":"2025-10-16T14:00","wave_height":0.78,"swell_height":0.54,"swell_direction":149,"sea_surface_temperature":21.1},{"time":"2025-10-16T15:00","wave_height":0.78,"swell_height":0.54,"swell_direction":149,"sea_surface_temperature":21.1},{"time":"2025-10-16T16:00","wave_height":0.8,"swell_height":0.56,"swell_direction":149,"sea_surface_temperature":21.1},{"time":"2025-10-16T17:00","wave_height":0.8,"swell_height":0.56,"swell_direction":149,"sea_surface_temperature":21.1},{"time":"2025-10-16T18:00","wave_height":0.78,"swell_height":0.54,"swell_direction":149,"sea_surface_temperature":21.1},{"time":"2025-10-16T19:00","wave_height":0.76,"swell_height":0.54,"swell_direction":150,"sea_surface_temperature":21.1},{"time":"2025-10-16T20:00","wave_height":0.74,"swell_height":0.52,"swell_direction":150,"sea_surface_temperature":21.1},{"time":"2025-10-16T21:00","wave_height":0.74,"swell_height":0.48,"swell_direction":150,"sea_surface_temperature":21.1},{"time":"2025-10-16T22:00","wave_height":0.74,"swell_height":0.46,"swell_direction":151,"sea_surface_temperature":21.1},{"time":"2025-10-16T23:00","wave_height":0.74,"swell_height":0.42,"swell_direction":151,"sea_surface_temperature":21.1},{"time":"2025-10-17T00:00","wave_height":0.72,"swell_height":0.42,"swell_direction":150,"sea_surface_temperature":21.1},{"time":"2025-10-17T01:00","wave_height":0.7,"swell_height":0.4,"swell_direction":148,"sea_surface_temperature":21},{"time":"2025-10-17T02:00","wave_height":0.68,"swell_height":0.4,"swell_direction":147,"sea_surface_temperature":21},{"time":"2025-10-17T03:00","wave_height":0.64,"swell_height":0.38,"swell_direction":150,"sea_surface_temperature":21},{"time":"2025-10-17T04:00","wave_height":0.62,"swell_height":0.36,"swell_direction":152,"sea_surface_temperature":21},{"time":"2025-10-17T05:00","wave_height":0.58,"swell_height":0.34,"swell_direction":155,"sea_surface_temperature":21},{"time":"2025-10-17T06:00","wave_height":0.54,"swell_height":0.34,"swell_direction":151,"sea_surface_temperature":20.9},{"time":"2025-10-17T07:00","wave_height":0.52,"swell_height":0.34,"swell_direction":148,"sea_surface_temperature":20.9},{"time":"2025-10-17T08:00","wave_height":0.48,"swell_height":0.34,"swell_direction":144,"sea_surface_temperature":20.9},{"time":"2025-10-17T09:00","wave_height":0.46,"swell_height":0.32,"swell_direction":145,"sea_surface_temperature":21},{"time":"2025-10-17T10:00","wave_height":0.42,"swell_height":0.32,"swell_direction":146,"sea_surface_temperature":21},{"time":"2025-10-17T11:00","wave_height":0.4,"swell_height":0.3,"swell_direction":147,"sea_surface_temperature":21.1},{"time":"2025-10-17T12:00","wave_height":0.36,"swell_height":0.28,"swell_direction":147,"sea_surface_temperature":21.2},{"time":"2025-10-17T13:00","wave_height":0.34,"swell_height":0.24,"swell_direction":146,"sea_surface_temperature":21.2},{"time":"2025-10-17T14:00","wave_height":0.3,"swell_height":0.22,"swell_direction":146,"sea_surface_temperature":21.3},{"time":"2025-10-17T15:00","wave_height":0.3,"swell_height":0.2,"swell_direction":146,"sea_surface_temperature":21.3},{"time":"2025-10-17T16:00","wave_height":0.3,"swell_height":0.2,"swell_direction":146,"sea_surface_temperature":21.3},{"time":"2025-10-17T17:00","wave_height":0.3,"swell_height":0.18,"swell_direction":146,"sea_surface_temperature":21.2},{"time":"2025-10-17T18:00","wave_height":0.28,"swell_height":0.16,"swell_direction":165,"sea_surface_temperature":21.2},{"time":"2025-10-17T19:00","wave_height":0.28,"swell_height":0.16,"swell_direction":184,"sea_surface_temperature":21.1},{"time":"2025-10-17T20:00","wave_height":0.26,"swell_height":0.14,"swell_direction":203,"sea_surface_temperature":21.1},{"time":"2025-10-17T21:00","wave_height":0.26,"swell_height":0.14,"swell_direction":203,"sea_surface_temperature":21},{"time":"2025-10-17T22:00","wave_height":0.24,"swell_height":0.12,"swell_direction":204,"sea_surface_temperature":21},{"time":"2025-10-17T23:00","wave_height":0.24,"swell_height":0.12,"swell_direction":204,"sea_surface_temperature":21},{"time":"2025-10-18T00:00","wave_height":0.24,"swell_height":0.12,"swell_direction":231,"sea_surface_temperature":21},{"time":"2025-10-18T01:00","wave_height":0.22,"swell_height":0.14,"swell_direction":257,"sea_surface_temperature":21},{"time":"2025-10-18T02:00","wave_height":0.22,"swell_height":0.14,"swell_direction":284,"sea_surface_temperature":21},{"time":"2025-10-18T03:00","wave_height":0.22,"swell_height":0.16,"swell_direction":282,"sea_surface_temperature":21},{"time":"2025-10-18T04:00","wave_height":0.22,"swell_height":0.2,"swell_direction":281,"sea_surface_temperature":20.9},{"time":"2025-10-18T05:00","wave_height":0.22,"swell_height":0.22,"swell_direction":279,"sea_surface_temperature":20.9},{"time":"2025-10-18T06:00","wave_height":0.22,"swell_height":0.22,"swell_direction":279,"sea_surface_temperature":20.9},{"time":"2025-10-18T07:00","wave_height":0.24,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":20.9},{"time":"2025-10-18T08:00","wave_height":0.24,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":20.9},{"time":"2025-10-18T09:00","wave_height":0.24,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":21},{"time":"2025-10-18T10:00","wave_height":0.22,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":21},{"time":"2025-10-18T11:00","wave_height":0.22,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":21.1},{"time":"2025-10-18T12:00","wave_height":0.22,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":21.2},{"time":"2025-10-18T13:00","wave_height":0.22,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":21.2},{"time":"2025-10-18T14:00","wave_height":0.22,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":21.3},{"time":"2025-10-18T15:00","wave_height":0.22,"swell_height":0.22,"swell_direction":278,"sea_surface_temperature":21.3},{"time":"2025-10-18T16:00","wave_height":0.22,"swell_height":0.22,"swell_direction":277,"sea_surface_temperature":21.3},{"time":"2025-10-18T17:00","wave_height":0.22,"swell_height":0.22,"swell_direction":277,"sea_surface_temperature":21.2},{"time":"2025-10-18T18:00","wave_height":0.22,"swell_height":0.22,"swell_direction":276,"sea_surface_temperature":21.2},{"time":"2025-10-18T19:00","wave_height":0.2,"swell_height":0.2,"swell_direction":276,"sea_surface_temperature":21.1},{"time":"2025-10-18T20:00","wave_height":0.2,"swell_height":0.2,"swell_direction":275,"sea_surface_temperature":21.1},{"time":"2025-10-18T21:00","wave_height":0.2,"swell_height":0.2,"swell_direction":274,"sea_surface_temperature":21},{"time":"2025-10-18T22:00","wave_height":0.18,"swell_height":0.18,"swell_direction":274,"sea_surface_temperature":21},{"time":"2025-10-18T23:00","wave_height":0.18,"swell_height":0.18,"swell_direction":273,"sea_surface_temperature":21},{"time":"2025-10-19T00:00","wave_height":0.16,"swell_height":0.16,"swell_direction":273,"sea_surface_temperature":21},{"time":"2025-10-19T01:00","wave_height":0.16,"swell_height":0.16,"swell_direction":272,"sea_surface_temperature":20.9},{"time":"2025-10-19T02:00","wave_height":0.14,"swell_height":0.14,"swell_direction":272,"sea_surface_temperature":20.9},{"time":"2025-10-19T03:00","wave_height":0.14,"swell_height":0.14,"swell_direction":265,"sea_surface_temperature":20.9},{"time":"2025-10-19T04:00","wave_height":0.14,"swell_height":0.12,"swell_direction":259,"sea_surface_temperature":20.9},{"time":"2025-10-19T05:00","wave_height":0.14,"swell_height":0.12,"swell_direction":252,"sea_surface_temperature":20.9},{"time":"2025-10-19T06:00","wave_height":0.14,"swell_height":0.1,"swell_direction":253,"sea_surface_temperature":20.9},{"time":"2025-10-19T07:00","wave_height":0.14,"swell_height":0.1,"swell_direction":255,"sea_surface_temperature":20.9},{"time":"2025-10-19T08:00","wave_height":0.14,"swell_height":0.08,"swell_direction":256,"sea_surface_temperature":20.9},{"time":"2025-10-19T09:00","wave_height":0.18,"swell_height":0.08,"swell_direction":287,"sea_surface_temperature":20.9},{"time":"2025-10-19T10:00","wave_height":0.22,"swell_height":0.06,"swell_direction":317,"sea_surface_temperature":20.9},{"time":"2025-10-19T11:00","wave_height":0.26,"swell_height":0.06,"swell_direction":348,"sea_surface_temperature":21},{"time":"2025-10-19T12:00","wave_height":0.24,"swell_height":0.08,"swell_direction":1,"sea_surface_temperature":21},{"time":"2025-10-19T13:00","wave_height":0.24,"swell_height":0.08,"swell_direction":15,"sea_surface_temperature":21},{"time":"2025-10-19T14:00","wave_height":0.22,"swell_height":0.1,"swell_direction":28,"sea_surface_temperature":21},{"time":"2025-10-19T15:00","wave_height":0.24,"swell_height":0.08,"swell_direction":58,"sea_surface_temperature":21},{"time":"2025-10-19T16:00","wave_height":0.28,"swell_height":0.06,"swell_direction":89,"sea_surface_temperature":21},{"time":"2025-10-19T17:00","wave_height":0.3,"swell_height":0.04,"swell_direction":119,"sea_surface_temperature":21},{"time":"2025-10-19T18:00","wave_height":0.34,"swell_height":0.06,"swell_direction":119,"sea_surface_temperature":20.9},{"time":"2025-10-19T19:00","wave_height":0.38,"swell_height":0.06,"swell_direction":120,"sea_surface_temperature":20.9},{"time":"2025-10-19T20:00","wave_height":0.42,"swell_height":0.08,"swell_direction":120,"sea_surface_temperature":20.9},{"time":"2025-10-19T21:00","wave_height":0.44,"swell_height":0.12,"swell_direction":117,"sea_surface_temperature":20.9},{"time":"2025-10-19T22:00","wave_height":0.46,"swell_height":0.14,"swell_direction":113,"sea_surface_temperature":20.8},{"time":"2025-10-19T23:00","wave_height":0.48,"swell_height":0.18,"swell_direction":110,"sea_surface_temperature":20.8},{"time":"2025-10-20T00:00","wave_height":0.46,"swell_height":0.18,"swell_direction":106,"sea_surface_temperature":20.8},{"time":"2025-10-20T01:00","wave_height":0.44,"swell_height":0.16,"swell_direction":102,"sea_surface_temperature":20.8},{"time":"2025-10-20T02:00","wave_height":0.42,"swell_height":0.16,"swell_direction":98,"sea_surface_temperature":20.8},{"time":"2025-10-20T03:00","wave_height":0.38,"swell_height":0.16,"swell_direction":95,"sea_surface_temperature":20.8},{"time":"2025-10-20T04:00","wave_height":0.36,"swell_height":0.14,"swell_direction":92,"sea_surface_temperature":20.7},{"time":"2025-10-20T05:00","wave_height":0.32,"swell_height":0.14,"swell_direction":89,"sea_surface_temperature":20.6},{"time":"2025-10-20T06:00","wave_height":0.3,"swell_height":0.14,"swell_direction":105,"sea_surface_temperature":20.6},{"time":"2025-10-20T07:00","wave_height":0.28,"swell_height":0.12,"swell_direction":120,"sea_surface_temperature":20.6},{"time":"2025-10-20T08:00","wave_height":0.26,"swell_height":0.12,"swell_direction":136,"sea_surface_temperature":20.6},{"time":"2025-10-20T09:00","wave_height":0.24,"swell_height":0.12,"swell_direction":95,"sea_surface_temperature":20.6},{"time":"2025-10-20T10:00","wave_height":0.24,"swell_height":0.14,"swell_direction":54,"sea_surface_temperature":20.6},{"time":"2025-10-20T11:00","wave_height":0.22,"swell_height":0.14,"swell_direction":13,"sea_surface_temperature":20.6},{"time":"2025-10-20T12:00","wave_height":0.2,"swell_height":0.14,"swell_direction":51,"sea_surface_temperature":20.6},{"time":"2025-10-20T13:00","wave_height":0.18,"swell_height":0.12,"swell_direction":90,"sea_surface_temperature":20.7},{"time":"2025-10-20T14:00","wave_height":0.16,"swell_height":0.12,"swell_direction":128,"sea_surface_temperature":20.7},{"time":"2025-10-20T15:00","wave_height":0.14,"swell_height":0.12,"swell_direction":128,"sea_surface_temperature":20.7},{"time":"2025-10-20T16:00","wave_height":0.14,"swell_height":0.1,"swell_direction":128,"sea_surface_temperature":20.7},{"time":"2025-10-20T17:00","wave_height":0.12,"swell_height":0.1,"swell_direction":128,"sea_surface_temperature":20.7},{"time":"2025-10-20T18:00","wave_height":0.12,"swell_height":0.1,"swell_direction":129,"sea_surface_temperature":20.7},{"time":"2025-10-20T19:00","wave_height":0.1,"swell_height":0.08,"swell_direction":130,"sea_surface_temperature":20.6},{"time":"2025-10-20T20:00","wave_height":0.1,"swell_height":0.08,"swell_direction":131,"sea_surface_temperature":20.6},{"time":"2025-10-20T21:00","wave_height":0.1,"swell_height":0.08,"swell_direction":132,"sea_surface_temperature":20.6},{"time":"2025-10-20T22:00","wave_height":0.08,"swell_height":0.06,"swell_direction":134,"sea_surface_temperature":20.6},{"time":"2025-10-20T23:00","wave_height":0.08,"swell_height":0.06,"swell_direction":135,"sea_surface_temperature":20.6},{"time":"2025-10-21T00:00","wave_height":0.08,"swell_height":0.06,"swell_direction":136,"sea_surface_temperature":20.5},{"time":"2025-10-21T01:00","wave_height":0.06,"swell_height":0.04,"swell_direction":137,"sea_surface_temperature":20.5},{"time":"2025-10-21T02:00","wave_height":0.06,"swell_height":0.04,"swell_direction":138,"sea_surface_temperature":20.5},{"time":"2025-10-21T03:00","wave_height":0.06,"swell_height":0.04,"swell_direction":138,"sea_surface_temperature":20.5},{"time":"2025-10-21T04:00","wave_height":0.04,"swell_height":0.04,"swell_direction":139,"sea_surface_temperature":20.5},{"time":"2025-10-21T05:00","wave_height":0.04,"swell_height":0.04,"swell_direction":139,"sea_surface_temperature":20.5},{"time":"2025-10-21T06:00","wave_height":0.04,"swell_height":0.04,"swell_direction":139,"sea_surface_temperature":20.4},{"time":"2025-10-21T07:00","wave_height":0.04,"swell_height":0.04,"swell_direction":139,"sea_surface_temperature":20.4},{"time":"2025-10-21T08:00","wave_height":0.04,"swell_height":0.04,"swell_direction":139,"sea_surface_temperature":20.4},{"time":"2025-10-21T09:00","wave_height":0.08,"swell_height":0.04,"swell_direction":140,"sea_surface_temperature":20.4},{"time":"2025-10-21T10:00","wave_height":0.1,"swell_height":0.04,"swell_direction":140,"sea_surface_temperature":20.4},{"time":"2025-10-21T11:00","wave_height":0.14,"swell_height":0.04,"swell_direction":141,"sea_surface_temperature":20.4},{"time":"2025-10-21T12:00","wave_height":0.14,"swell_height":0.06,"swell_direction":144,"sea_surface_temperature":20.4},{"time":"2025-10-21T13:00","wave_height":0.14,"swell_height":0.06,"swell_direction":148,"sea_surface_temperature":20.4},{"time":"2025-10-21T14:00","wave_height":0.14,"swell_height":0.08,"swell_direction":151,"sea_surface_temperature":20.4},{"time":"2025-10-21T15:00","wave_height":0.16,"swell_height":0.06,"swell_direction":158,"sea_surface_temperature":20.4},{"time":"2025-10-21T16:00","wave_height":0.18,"swell_height":0.06,"swell_direction":164,"sea_surface_temperature":20.4},{"time":"2025-10-21T17:00","wave_height":0.2,"swell_height":0.04,"swell_direction":171,"sea_surface_temperature":20.4},{"time":"2025-10-21T18:00","wave_height":0.24,"swell_height":0.08,"swell_direction":155,"sea_surface_temperature":20.4},{"time":"2025-10-21T19:00","wave_height":0.28,"swell_height":0.1,"swell_direction":138,"sea_surface_temperature":20.4},{"time":"2025-10-21T20:00","wave_height":0.32,"swell_height":0.14,"swell_direction":122,"sea_surface_temperature":20.4},{"time":"2025-10-21T21:00","wave_height":0.34,"swell_height":0.14,"swell_direction":122,"sea_surface_temperature":20.4},{"time":"2025-10-21T22:00","wave_height":0.38,"swell_height":0.14,"swell_direction":122,"sea_surface_temperature":20.4},{"time":"2025-10-21T23:00","wave_height":0.4,"swell_height":0.14,"swell_direction":122,"sea_surface_temperature":20.4}],"alerts":[],"advice":"Condizioni marine generalmente buone.","tides":{},"days":[{"day_label":"15/10","temp_max":"19.7","temp_min":"18.3","precipitation":"3.90","icon":"🌧️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19.6,19.7,19.7,19.5,19.5,19.3,19.2,19.2,19.4,19.2,18.9,18.6,18.4,18.3,18.4,18.5,18.5,18.5,18.5,18.5,18.5,18.7,18.7,18.7],"hourly_winds":[7.1,5.4,4.6,5.7,5.5,7.1,5.8,4,4.2,6.2,8.1,10.2,10.7,11.1,11.9,12.4,11.4,13,13.8,14.5,14.5,17,17.7,18.2],"hourly_wind_directions":[60,42,45,55,58,75,83,90,59,54,45,42,48,54,55,60,66,62,62,67,63,54,52,52],"hourly_precips":[0,0,0,0,0,0,0,0,0.1,0.1,0.3,0.3,0.4,0.7,0.6,0.4,0.5,0.2,0.1,0.1,0.1,0,0,0],"hourly_pressures":[1018.7,1018.1,1018.3,1017.6,1017.6,1017.3,1017.5,1017.4,1017.5,1017.9,1018.1,1018,1017.7,1017.6,1017.1,1016.8,1016.6,1016.2,1016.3,1016.3,1016.5,1016.3,1016.3,1015.9],"pressure_avg":"1017.2"},{"day_label":"16/10","temp_max":"18.8","temp_min":"17.0","precipitation":"7.40","icon":"🌧️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[18.5,18.4,18.3,18.2,18.1,18.1,17.9,18,17.9,17.8,18.1,17.7,17.4,17,17.7,17.9,18.4,18.8,18.6,18.4,18.3,18.3,18,17.8],"hourly_winds":[18.5,18.7,19,20.4,20,19.7,19.5,19.5,19.6,20.4,20.1,20.9,19.1,18.1,18.3,20.9,23.4,22.7,23.2,22.4,20.3,17.8,17.4,15],"hourly_wind_directions":[53,52,53,54,56,59,60,60,54,54,54,58,58,46,47,44,44,46,46,37,33,36,30,21],"hourly_precips":[0,0,0,0,0.1,0,0.2,0.1,0.4,0.7,0.5,0.7,1,1.5,0.2,0.3,0,0,0,0,0,0.3,0.8,0.6],"hourly_pressures":[1015.6,1015.1,1015,1014.5,1014.1,1013.7,1013.5,1013.4,1013.7,1014.1,1014.2,1014.2,1014,1013.4,1012.9,1012.8,1012.6,1012.4,1012.3,1012.5,1012.6,1012.8,1013,1013],"pressure_avg":"1013.6"},{"day_label":"17/10","temp_max":"20.1","temp_min":"17.3","precipitation":"1.60","icon":"⛅","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[17.8,17.7,17.6,17.4,17.3,17.4,17.7,17.9,18.1,18.3,18.5,18.8,19.1,19.4,19.6,19.8,19.9,20,20.1,19.9,19.4,19.3,19.3,19.2],"hourly_winds":[15.5,18.1,20.1,19.8,19.2,20.2,20,20.2,16.1,14.8,13.4,11.3,9.1,8.1,8.4,7.2,5.9,4.9,5.8,6.8,5.4,1.1,1.8,2.3],"hourly_wind_directions":[3,354,351,350,343,341,337,344,344,347,346,351,353,347,335,323,313,287,266,267,266,252,143,141],"hourly_precips":[0.4,0.2,0.2,0.4,0.3,0.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hourly_pressures":[1012.7,1012.4,1012.1,1011.9,1011.7,1011.6,1011.8,1011.9,1012.5,1013.3,1014.1,1014.3,1014.4,1014.4,1014.2,1014.4,1014.7,1015,1015.4,1015.8,1016.2,1016.8,1017.4,1017.7],"pressure_avg":"1014.0"},{"day_label":"18/10","temp_max":"19.5","temp_min":"18.4","precipitation":"0.30","icon":"🌤️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19,18.9,18.9,18.7,18.7,18.7,18.7,18.5,18.4,18.6,18.8,19,19.1,19.2,19.3,19.4,19.4,19.5,19.5,19.5,19.5,19.4,19.3,19.2],"hourly_winds":[0.8,0.4,1.5,2.5,3.3,4,4,5.1,6.8,8.6,9.9,9.4,10,9.1,9.5,9.8,10.2,10.7,10.9,11.4,11.5,11.5,11.5,10.9],"hourly_wind_directions":[153,360,104,90,103,117,90,86,115,112,123,137,139,146,143,152,162,166,163,156,148,139,129,117],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.1,0.1,0.1],"hourly_pressures":[1017.9,1017.9,1018.1,1018.2,1018.4,1018.7,1019,1019.3,1020,1020.6,1021.2,1021.8,1022,1021.8,1021.2,1021,1020.7,1020.6,1020.6,1020.8,1020.9,1021.1,1021.3,1021.4],"pressure_avg":"1020.2"},{"day_label":"19/10","temp_max":"21.5","temp_min":"17.7","precipitation":"0.00","icon":"☀️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19,18.8,18.6,18.4,18.1,18,17.8,17.7,17.7,17.9,18.2,18.6,19.2,20,20.7,21.1,21.5,21.5,21.2,20.7,20.2,19.8,19.4,19],"hourly_winds":[9.6,8.4,8.5,9.1,9.9,10.2,10.4,10.9,11.1,12,12.8,13.3,12.6,11.4,10,7.2,3.7,1.9,4.4,8.9,12.3,12.7,12.2,11.5],"hourly_wind_directions":[103,80,62,56,57,58,56,56,54,51,50,49,53,62,69,72,79,68,55,50,50,47,43,39],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hourly_pressures":[1021.4,1021.3,1021.2,1021,1020.7,1020.4,1020.2,1020.1,1020.1,1020.2,1020.4,1020.3,1019.9,1019.2,1018.6,1018,1017.5,1017.1,1017,1017.1,1017.1,1017,1016.9,1016.7],"pressure_avg":"1019.1"},{"day_label":"20/10","temp_max":"19.5","temp_min":"16.9","precipitation":"0.00","icon":"⛅","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[18.8,18.6,18.4,18.2,18.1,17.9,17.8,17.8,17.8,16.9,17.3,17.7,18.2,18.8,19.3,19.4,19.3,19.2,19.2,19.2,19.3,19.3,19.4,19.5],"hourly_winds":[11,10.5,10.2,10.4,10.8,11.2,10.4,9.5,8.9,15.1,16.3,15.5,11.7,6.4,2.6,4.9,8.7,11.2,12.3,12.1,11.7,10.5,9.4,8.7],"hourly_wind_directions":[38,41,39,34,26,21,20,25,27,38,45,48,47,38,344,287,277,276,277,280,281,278,270,263],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"hourly_pressures":[1016.4,1016,1015.6,1015,1014.4,1013.9,1013.6,1013.3,1013.2,1015,1015.2,1015.2,1015,1014.5,1014.2,1014,1013.8,1013.7,1013.7,1013.7,1013.8,1014,1014.2,1014.4],"pressure_avg":"1014.4"},{"day_label":"21/10","temp_max":"20.4","temp_min":"18.3","precipitation":"3.60","icon":"🌧️","hourly_labels":["00:00","01:00","02:00","03:00","04:00","05:00","06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],"hourly_temps":[19.4,19.3,19.3,19.4,19.6,19.6,19.2,18.6,18.3,18.8,19.6,20.1,19.7,19,18.7,19.1,19.9,20.4,20.4,20.1,19.8,19.6,19.3,19.1],"hourly_winds":[9.3,10.7,11.6,11.7,11.7,10.4,6.6,2.3,3.3,1.5,3.4,7.4,10,12.1,13.2,12.9,12,10.8,9.8,8.2,7.1,6.5,7.1,8.7],"hourly_wind_directions":[254,250,248,252,261,268,279,342,49,76,212,219,218,217,215,210,201,195,197,203,204,186,165,150],"hourly_precips":[0,0,0,0,0,0,0,0,0,0,0,0,0.3,0.3,0.3,0.4,0.4,0.4,0.2,0.2,0.2,0.3,0.3,0.3],"hourly_pressures":[1014.4,1014.3,1014.1,1013.9,1013.6,1013.4,1013.4,1013.5,1013.7,1014,1014.3,1014.5,1014.5,1014.3,1014.2,1014,1013.9,1013.8,1014,1014.2,1014.5,1014.7,1014.9,1015],"pressure_avg":"1014.1"}],"updated_at":"15/10/2025, 12:57:43"};
let currentDay = 0;

// Toggle dettaglio
function toggleDetail(id){
  document.querySelectorAll('.detail-section.active').forEach(e=>e.classList.remove('active'));
  document.getElementById(id).classList.toggle('active');
}

// Info utility
function windDirInfo(deg){
  const list=[{n:"Tramontana",abbr:"N",arr:"⬇️"},{n:"Grecale",abbr:"NE",arr:"↙️"},
              {n:"Levante",abbr:"E",arr:"⬅️"},{n:"Scirocco",abbr:"SE",arr:"↖️"},
              {n:"Ostro",abbr:"S",arr:"⬆️"},{n:"Libeccio",abbr:"SO",arr:"↗️"},
              {n:"Ponente",abbr:"O",arr:"➡️"},{n:"Maestrale",abbr:"NO",arr:"↘️"}];
  if(deg==null) return {n:"N/D",abbr:"--",arr:"↕"};
  return list[Math.floor(((deg+22.5)%360)/45)]||list[0];
}
function mean(arr){return arr&&arr.length?arr.reduce((a,b)=>a+b,0)/arr.length:0;}
function trend(arr){
  if(!arr||arr.length<5) return "N/D";
  const s=(arr[0]+arr[1]+arr[2])/3,e=(arr[arr.length-3]+arr[arr.length-2]+arr[arr.length-1])/3;
  if(e> s+1) return 'in aumento ⬆️';
  if(s> e+1) return 'in calo ⬇️';
  return 'stabile ◼️';
}
function rainIcon(mm){
  if(mm<0.1) return '';
  if(mm<0.5) return '💧';
  if(mm<1) return '💧💧';
  if(mm<3) return '💧💧💧';
  return '💧💧💧💧';
}

// Render giorno grande
function renderToday(){
  const d=DATA.days[currentDay];
  const alerts=(DATA.alerts||[]).join(",")||"Nessuna";
  document.getElementById("day-today").innerHTML=`
    <h2>${d.day_label} ${d.icon}</h2>
    <div><b>Max:</b> ${d.temp_max}°C • <b>Min:</b> ${d.temp_min}°C</div>
    <div><b>Pioggia:</b> ${d.precipitation}mm ${rainIcon(d.precipitation)}</div>
    <div><b>Vento max:</b> ${d.wind_max} km/h</div>
    <div><b>Pressione media:</b> ${d.pressure_avg} hPa (${trend(d.hourly_pressures)})</div>
    <div><b>Allerta:</b> ${alerts}</div>
    <div class="message"><b>Consiglio:</b> ${DATA.advice}</div>`;
}

// Render mini giorni
function renderMini(){
  const r1=document.getElementById("mini-row1"),r2=document.getElementById("mini-row2");
  r1.innerHTML=r2.innerHTML="";
  DATA.days.forEach((d,i)=>{
    const b=document.createElement("section");
    b.className="mini-day"+(i===currentDay?" selected":"");
    b.innerHTML=`
      <div class="day-label">${d.day_label}</div>
      <div class="icon">${d.icon}</div>
      <div class="temps">↑${d.temp_max}° ↓${d.temp_min}°</div>
      <div class="wind">💨${d.wind_max}km/h</div>
      <div class="rain">${rainIcon(d.precipitation)} ${d.precipitation}mm</div>`;
    b.onclick=()=>{currentDay=i;renderAll();};
    if(i<4) r1.appendChild(b); else r2.appendChild(b);
  });
}

// Render box con grafici (come implementato prima: renderWind,renderRain,...)

function renderAll(){
  renderToday(); renderMini();
  renderWind(); renderRain(); renderSea(); renderPress();
  document.getElementById("footer").innerHTML=`Powered by Open-Meteo • Ultimo agg: ${DATA.updated_at}`;
}

renderAll();
</script>
</body>
</html>
