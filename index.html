<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Previsioni Procida - Meteo Giornaliero</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&family=Roboto&display=swap');
    body {
      font-family: 'Roboto', Arial, sans-serif;
      max-width: 950px;
      margin: 40px auto;
      background: linear-gradient(135deg, #26365a, #2a3a7f 85%, #3498db 97%);
      color: #f0f8ff;
      padding: 22px 12px 22px 12px;
      overflow-x: hidden;
    }
    .header {
      font-family: 'Montserrat', sans-serif;
      font-size: 2.6rem;
      font-weight: 900;
      text-align: center;
      color: #cfe9ff;
      text-shadow: 1px 2px 15px #09172a;
      letter-spacing: 2px;
      user-select: none;
      margin-bottom: 35px;
    }
    .footer {
      margin-top: 25px;
      text-align: center;
      color: #cbefff;
      font-size: 17px;
      font-weight: 500;
    }
    /* Blocchi sezione marine compatti */
    #marine-conditions {
      max-width:680px;
      margin: 22px auto 0 auto;
      background: rgba(20,30,55,0.41);
      border-radius: 20px;
      padding: 12px 9px 14px 12px;
      box-shadow: 0 0 12px #1352a4bb;
      color: #a8cff8;
      font-family: Arial, sans-serif;
    }
    #marine-conditions h3 {
      font-weight: 700;
      font-size: 1.35rem;
      margin: 8px 0 7px 0;
      color: #e0f0ff;
      text-align:left;
    }
    #marine-summary {
      margin-bottom: 6px;
      font-size: 1.06rem;
    }
    .marine-chart-wrap {
      width:100%;
      max-width:375px;
      height:112px;
      margin:0 auto 4px auto;
    }
    #marine-alerts { 
      margin-top: 4px;
      color: #ffcc66;
      font-weight: 700;
      font-size: 1.05rem;
      min-height:18px;
    }
    @media (max-width: 700px) {
      #marine-conditions { max-width:99vw;padding: 7px 1vw; }
      .marine-chart-wrap { max-width:98vw; height:90px; }
    }
    /* ...altri stili come da template originale */
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="header">PREVISIONI METEO - PROCIDA</div>
<!-- Qui va la dashboard meteo classica -->

<!-- Blocco condizioni marine compatto -->
<section id="marine-conditions">
  <h3>Condizioni Marine</h3>
  <div id="marine-summary"></div>
  <div class="marine-chart-wrap">
    <canvas id="marine-wave-chart" width="360" height="100"></canvas>
  </div>
  <div id="marine-alerts"></div>
</section>

<!-- (Restanti blocchi meteo, tab, grafici ecc. come già presenti) -->

<div class="footer" id="footer">Powered by Open-Meteo • UI by micheledv74 • Ultimo agg.: <span id="updated_stamp"></span></div>
<script>
const DATA = {"mergedHourly":[{"time":"2025-10-12T00:00","wave_height":0.26,"swell_height":0.12,"swell_direction":211},{"time":"2025-10-12T01:00","wave_height":0.28,"swell_height":0.1,"swell_direction":210},{"time":"2025-10-12T02:00","wave_height":0.28,"swell_height":0.1,"swell_direction":210},{"time":"2025-10-12T03:00","wave_height":0.28,"swell_height":0.1,"swell_direction":177},{"time":"2025-10-12T04:00","wave_height":0.3,"swell_height":0.12,"swell_direction":145},{"time":"2025-10-12T05:00","wave_height":0.3,"swell_height":0.12,"swell_direction":112},{"time":"2025-10-12T06:00","wave_height":0.28,"swell_height":0.12,"swell_direction":108},{"time":"2025-10-12T07:00","wave_height":0.26,"swell_height":0.14,"swell_direction":105},{"time":"2025-10-12T08:00","wave_height":0.24,"swell_height":0.14,"swell_direction":101},{"time":"2025-10-12T09:00","wave_height":0.2,"swell_height":0.12,"swell_direction":102},{"time":"2025-10-12T10:00","wave_height":0.18,"swell_height":0.12,"swell_direction":104},{"time":"2025-10-12T11:00","wave_height":0.14,"swell_height":0.1,"swell_direction":105},{"time":"2025-10-12T12:00","wave_height":0.14,"swell_height":0.1,"swell_direction":107},{"time":"2025-10-12T13:00","wave_height":0.12,"swell_height":0.08,"swell_direction":110},{"time":"2025-10-12T14:00","wave_height":0.12,"swell_height":0.08,"swell_direction":112},{"time":"2025-10-12T15:00","wave_height":0.1,"swell_height":0.06,"swell_direction":143},{"time":"2025-10-12T16:00","wave_height":0.1,"swell_height":0.06,"swell_direction":173},{"time":"2025-10-12T17:00","wave_height":0.08,"swell_height":0.04,"swell_direction":204},{"time":"2025-10-12T18:00","wave_height":0.08,"swell_height":0.04,"swell_direction":205},{"time":"2025-10-12T19:00","wave_height":0.08,"swell_height":0.04,"swell_direction":207},{"time":"2025-10-12T20:00","wave_height":0.08,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-12T21:00","wave_height":0.08,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-12T22:00","wave_height":0.06,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-12T23:00","wave_height":0.06,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T00:00","wave_height":0.06,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T01:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T02:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T03:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T04:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T05:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T06:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T07:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T08:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T09:00","wave_height":0.04,"swell_height":0.04,"swell_direction":208},{"time":"2025-10-13T10:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T11:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T12:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T13:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T14:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T15:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T16:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T17:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T18:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T19:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T20:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T21:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T22:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-13T23:00","wave_height":0.04,"swell_height":0.02,"swell_direction":208},{"time":"2025-10-14T00:00","wave_height":0.04,"swell_height":0.02,"swell_direction":241},{"time":"2025-10-14T01:00","wave_height":0.04,"swell_height":0.02,"swell_direction":275},{"time":"2025-10-14T02:00","wave_height":0.04,"swell_height":0.02,"swell_direction":308},{"time":"2025-10-14T03:00","wave_height":0.04,"swell_height":0.02,"swell_direction":309},{"time":"2025-10-14T04:00","wave_height":0.04,"swell_height":0.04,"swell_direction":309},{"time":"2025-10-14T05:00","wave_height":0.04,"swell_height":0.04,"swell_direction":310},{"time":"2025-10-14T06:00","wave_height":0.04,"swell_height":0.04,"swell_direction":310},{"time":"2025-10-14T07:00","wave_height":0.04,"swell_height":0.04,"swell_direction":309},{"time":"2025-10-14T08:00","wave_height":0.04,"swell_height":0.04,"swell_direction":309},{"time":"2025-10-14T09:00","wave_height":0.04,"swell_height":0.04,"swell_direction":308},{"time":"2025-10-14T10:00","wave_height":0.04,"swell_height":0.04,"swell_direction":308},{"time":"2025-10-14T11:00","wave_height":0.04,"swell_height":0.04,"swell_direction":307},{"time":"2025-10-14T12:00","wave_height":0.04,"swell_height":0.04,"swell_direction":306},{"time":"2025-10-14T13:00","wave_height":0.04,"swell_height":0.04,"swell_direction":306},{"time":"2025-10-14T14:00","wave_height":0.04,"swell_height":0.04,"swell_direction":305},{"time":"2025-10-14T15:00","wave_height":0.04,"swell_height":0.04,"swell_direction":304},{"time":"2025-10-14T16:00","wave_height":0.04,"swell_height":0.02,"swell_direction":304},{"time":"2025-10-14T17:00","wave_height":0.04,"swell_height":0.02,"swell_direction":303},{"time":"2025-10-14T18:00","wave_height":0.04,"swell_height":0.02,"swell_direction":302},{"time":"2025-10-14T19:00","wave_height":0.04,"swell_height":0.02,"swell_direction":302},{"time":"2025-10-14T20:00","wave_height":0.04,"swell_height":0.02,"swell_direction":301},{"time":"2025-10-14T21:00","wave_height":0.04,"swell_height":0.02,"swell_direction":273},{"time":"2025-10-14T22:00","wave_height":0.02,"swell_height":0.02,"swell_direction":245},{"time":"2025-10-14T23:00","wave_height":0.02,"swell_height":0.02,"swell_direction":217},{"time":"2025-10-15T00:00","wave_height":0.02,"swell_height":0.02,"swell_direction":217},{"time":"2025-10-15T01:00","wave_height":0.02,"swell_height":0.02,"swell_direction":217},{"time":"2025-10-15T02:00","wave_height":0.02,"swell_height":0.02,"swell_direction":217},{"time":"2025-10-15T03:00","wave_height":0.02,"swell_height":0.02,"swell_direction":218},{"time":"2025-10-15T04:00","wave_height":0.04,"swell_height":0.02,"swell_direction":219},{"time":"2025-10-15T05:00","wave_height":0.04,"swell_height":0.02,"swell_direction":220},{"time":"2025-10-15T06:00","wave_height":0.04,"swell_height":0.02,"swell_direction":220},{"time":"2025-10-15T07:00","wave_height":0.04,"swell_height":0.04,"swell_direction":220},{"time":"2025-10-15T08:00","wave_height":0.04,"swell_height":0.04,"swell_direction":220},{"time":"2025-10-15T09:00","wave_height":0.06,"swell_height":0.04,"swell_direction":220},{"time":"2025-10-15T10:00","wave_height":0.06,"swell_height":0.06,"swell_direction":219},{"time":"2025-10-15T11:00","wave_height":0.08,"swell_height":0.06,"swell_direction":219},{"time":"2025-10-15T12:00","wave_height":0.08,"swell_height":0.08,"swell_direction":219},{"time":"2025-10-15T13:00","wave_height":0.1,"swell_height":0.08,"swell_direction":219},{"time":"2025-10-15T14:00","wave_height":0.1,"swell_height":0.1,"swell_direction":219},{"time":"2025-10-15T15:00","wave_height":0.12,"swell_height":0.1,"swell_direction":219},{"time":"2025-10-15T16:00","wave_height":0.12,"swell_height":0.12,"swell_direction":218},{"time":"2025-10-15T17:00","wave_height":0.14,"swell_height":0.12,"swell_direction":218},{"time":"2025-10-15T18:00","wave_height":0.14,"swell_height":0.12,"swell_direction":217},{"time":"2025-10-15T19:00","wave_height":0.16,"swell_height":0.14,"swell_direction":217},{"time":"2025-10-15T20:00","wave_height":0.16,"swell_height":0.14,"swell_direction":216},{"time":"2025-10-15T21:00","wave_height":0.22,"swell_height":0.14,"swell_direction":216},{"time":"2025-10-15T22:00","wave_height":0.3,"swell_height":0.14,"swell_direction":215},{"time":"2025-10-15T23:00","wave_height":0.36,"swell_height":0.14,"swell_direction":215},{"time":"2025-10-16T00:00","wave_height":0.38,"swell_height":0.14,"swell_direction":215},{"time":"2025-10-16T01:00","wave_height":0.38,"swell_height":0.14,"swell_direction":215},{"time":"2025-10-16T02:00","wave_height":0.4,"swell_height":0.14,"swell_direction":215},{"time":"2025-10-16T03:00","wave_height":0.42,"swell_height":0.14,"swell_direction":215},{"time":"2025-10-16T04:00","wave_height":0.46,"swell_height":0.14,"swell_direction":214},{"time":"2025-10-16T05:00","wave_height":0.48,"swell_height":0.14,"swell_direction":214},{"time":"2025-10-16T06:00","wave_height":0.52,"swell_height":0.16,"swell_direction":194},{"time":"2025-10-16T07:00","wave_height":0.54,"swell_height":0.2,"swell_direction":174},{"time":"2025-10-16T08:00","wave_height":0.58,"swell_height":0.22,"swell_direction":154},{"time":"2025-10-16T09:00","wave_height":0.58,"swell_height":0.26,"swell_direction":153},{"time":"2025-10-16T10:00","wave_height":0.6,"swell_height":0.3,"swell_direction":153},{"time":"2025-10-16T11:00","wave_height":0.6,"swell_height":0.34,"swell_direction":152},{"time":"2025-10-16T12:00","wave_height":0.58,"swell_height":0.36,"swell_direction":151},{"time":"2025-10-16T13:00","wave_height":0.54,"swell_height":0.38,"swell_direction":149},{"time":"2025-10-16T14:00","wave_height":0.52,"swell_height":0.4,"swell_direction":148},{"time":"2025-10-16T15:00","wave_height":0.5,"swell_height":0.4,"swell_direction":148},{"time":"2025-10-16T16:00","wave_height":0.5,"swell_height":0.42,"swell_direction":148},{"time":"2025-10-16T17:00","wave_height":0.48,"swell_height":0.42,"swell_direction":148},{"time":"2025-10-16T18:00","wave_height":0.5,"swell_height":0.42,"swell_direction":149},{"time":"2025-10-16T19:00","wave_height":0.54,"swell_height":0.4,"swell_direction":151},{"time":"2025-10-16T20:00","wave_height":0.56,"swell_height":0.4,"swell_direction":152},{"time":"2025-10-16T21:00","wave_height":0.58,"swell_height":0.38,"swell_direction":154},{"time":"2025-10-16T22:00","wave_height":0.6,"swell_height":0.38,"swell_direction":157},{"time":"2025-10-16T23:00","wave_height":0.62,"swell_height":0.36,"swell_direction":159},{"time":"2025-10-17T00:00","wave_height":0.6,"swell_height":0.36,"swell_direction":154},{"time":"2025-10-17T01:00","wave_height":0.56,"swell_height":0.36,"swell_direction":149},{"time":"2025-10-17T02:00","wave_height":0.54,"swell_height":0.36,"swell_direction":144},{"time":"2025-10-17T03:00","wave_height":0.54,"swell_height":0.34,"swell_direction":145},{"time":"2025-10-17T04:00","wave_height":0.52,"swell_height":0.34,"swell_direction":145},{"time":"2025-10-17T05:00","wave_height":0.52,"swell_height":0.32,"swell_direction":146},{"time":"2025-10-17T06:00","wave_height":0.52,"swell_height":0.3,"swell_direction":146},{"time":"2025-10-17T07:00","wave_height":0.5,"swell_height":0.28,"swell_direction":147},{"time":"2025-10-17T08:00","wave_height":0.5,"swell_height":0.26,"swell_direction":147},{"time":"2025-10-17T09:00","wave_height":0.46,"swell_height":0.24,"swell_direction":147},{"time":"2025-10-17T10:00","wave_height":0.44,"swell_height":0.24,"swell_direction":147},{"time":"2025-10-17T11:00","wave_height":0.4,"swell_height":0.22,"swell_direction":147},{"time":"2025-10-17T12:00","wave_height":0.36,"swell_height":0.2,"swell_direction":147},{"time":"2025-10-17T13:00","wave_height":0.34,"swell_height":0.2,"swell_direction":147},{"time":"2025-10-17T14:00","wave_height":0.3,"swell_height":0.18,"swell_direction":147},{"time":"2025-10-17T15:00","wave_height":0.26,"swell_height":0.16,"swell_direction":147},{"time":"2025-10-17T16:00","wave_height":0.24,"swell_height":0.16,"swell_direction":147},{"time":"2025-10-17T17:00","wave_height":0.2,"swell_height":0.14,"swell_direction":147},{"time":"2025-10-17T18:00","wave_height":0.18,"swell_height":0.12,"swell_direction":175},{"time":"2025-10-17T19:00","wave_height":0.16,"swell_height":0.1,"swell_direction":202},{"time":"2025-10-17T20:00","wave_height":0.14,"swell_height":0.08,"swell_direction":230},{"time":"2025-10-17T21:00","wave_height":0.14,"swell_height":0.08,"swell_direction":231},{"time":"2025-10-17T22:00","wave_height":0.14,"swell_height":0.08,"swell_direction":231},{"time":"2025-10-17T23:00","wave_height":0.14,"swell_height":0.08,"swell_direction":232},{"time":"2025-10-18T00:00","wave_height":0.14,"swell_height":0.08,"swell_direction":234},{"time":"2025-10-18T01:00","wave_height":0.12,"swell_height":0.06,"swell_direction":235},{"time":"2025-10-18T02:00","wave_height":0.12,"swell_height":0.06,"swell_direction":237},{"time":"2025-10-18T03:00","wave_height":0.12,"swell_height":0.06,"swell_direction":239},{"time":"2025-10-18T04:00","wave_height":0.1,"swell_height":0.04,"swell_direction":242},{"time":"2025-10-18T05:00","wave_height":0.1,"swell_height":0.04,"swell_direction":244},{"time":"2025-10-18T06:00","wave_height":0.1,"swell_height":0.04,"swell_direction":242},{"time":"2025-10-18T07:00","wave_height":0.08,"swell_height":0.04,"swell_direction":240},{"time":"2025-10-18T08:00","wave_height":0.08,"swell_height":0.04,"swell_direction":238},{"time":"2025-10-18T09:00","wave_height":0.08,"swell_height":0.04,"swell_direction":238},{"time":"2025-10-18T10:00","wave_height":0.1,"swell_height":0.06,"swell_direction":238},{"time":"2025-10-18T11:00","wave_height":0.1,"swell_height":0.06,"swell_direction":238},{"time":"2025-10-18T12:00","wave_height":0.1,"swell_height":0.06,"swell_direction":202},{"time":"2025-10-18T13:00","wave_height":0.12,"swell_height":0.08,"swell_direction":166},{"time":"2025-10-18T14:00","wave_height":0.12,"swell_height":0.08,"swell_direction":130},{"time":"2025-10-18T15:00","wave_height":0.14,"swell_height":0.08,"swell_direction":124},{"time":"2025-10-18T16:00","wave_height":0.16,"swell_height":0.06,"swell_direction":118},{"time":"2025-10-18T17:00","wave_height":0.18,"swell_height":0.06,"swell_direction":112},{"time":"2025-10-18T18:00","wave_height":0.18,"swell_height":0.08,"swell_direction":120},{"time":"2025-10-18T19:00","wave_height":0.18,"swell_height":0.08,"swell_direction":127},{"time":"2025-10-18T20:00","wave_height":0.18,"swell_height":0.1,"swell_direction":135},{"time":"2025-10-18T21:00","wave_height":0.18,"swell_height":0.12,"swell_direction":136},{"time":"2025-10-18T22:00","wave_height":0.2,"swell_height":0.16,"swell_direction":137},{"time":"2025-10-18T23:00","wave_height":0.2,"swell_height":0.18,"swell_direction":138}],"alerts":[],"advice":"Condizioni marine generalmente buone.","tides":{}};

// --- METEO JS tua dashboard, non modificato qui ---

// ----- Sezione Marine ----- //
const mergedHourly = DATA.mergedHourly || [];
const alerts = DATA.alerts || [];
const advice = DATA.advice || "";

// breve descrizione
function humanDirection(deg) {
  if(deg==null) return '--';
  const directions = ['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW'];
  const ix = Math.round(deg / 22.5) % 16;
  return directions[ix];
}

(function renderMarine() {
  const divSummary = document.getElementById('marine-summary');
  if(mergedHourly.length) {
    // Mostra valori per la prima ora disponibile (es: ora corrente)
    const h = mergedHourly[0];
    divSummary.textContent =
      `Altezza onda: ${(h.wave_height??0).toFixed(2)}m, direzione swell: ${humanDirection(h.swell_direction)} (${h.swell_direction??'-'}°), altezza swell: ${(h.swell_height??0).toFixed(2)}m.`;
  } else {
    divSummary.textContent = "Dati marine non disponibili.";
  }

  // Chart compatto
  const ctx = document.getElementById('marine-wave-chart').getContext('2d');
  const labels = mergedHourly.slice(0,24).map(h => h.time.slice(11,16));
  const waves = mergedHourly.slice(0,24).map(h => h.wave_height);
  const swells = mergedHourly.slice(0,24).map(h => h.swell_height);

  new Chart(ctx, {
    type: 'line',
    data: {
      labels,
      datasets: [
        {
          label: 'Altezza onda (m)',
          borderColor: 'rgba(30,144,255,0.88)',
          backgroundColor: 'rgba(30,144,255,0.18)',
          fill: true, data: waves,
          tension: 0.21, pointRadius: 1.5,
        },
        {
          label: 'Altezza swell (m)',
          borderColor: 'rgba(8,206,120,0.86)',
          backgroundColor: 'rgba(60,255,210,0.12)',
          fill: true, data: swells,
          tension: 0.21, pointRadius: 1.5,
        }
      ]
    },
    options: {
      responsive: false,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true,
          title: { display: true, text: 'm', color: '#a8cff8' },
          ticks: { color: '#a8cff8', font: { size: 11 } }
        },
        x: {
          title: { display: false },
          ticks: { color: '#a8cff8', font: { size: 10 }, maxTicksLimit: 8 }
        }
      },
      plugins: {
        legend: { labels: { color: '#a8cff8', font:{size:12} }, display: true},
        tooltip: { mode: 'index', intersect: false }
      }
    }
  });

  // Alert o consiglio
  const divAlerts = document.getElementById('marine-alerts');
  if(alerts.length) {
    divAlerts.innerHTML = alerts.map(a=>`⚠️ ${a.message}`).join('<br>');
  } else {
    divAlerts.textContent = `🗞️ ${advice}`;
  }
})();
</script>
</body>
</html>
